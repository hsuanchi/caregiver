<!DOCTYPE html>
<html lang="zh-Hant-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¦–è¦ºåŒ–ç‡Ÿé¤Šç™¾ç§‘ | NutriWiki</title>
    
    <!-- å¼•å…¥ Tailwind CSS (å¿«é€Ÿæ’ç‰ˆèˆ‡ç¾åŒ–) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- å¼•å…¥ Chart.js (è³‡æ–™è¦–è¦ºåŒ–åœ–è¡¨) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- å¼•å…¥ Google Fonts (æå‡é–±è®€é«”é©—) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- å¼•å…¥ FontAwesome (åœ–ç¤º) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body { font-family: 'Noto Sans TC', sans-serif; }
        /* è‡ªå®šç¾©éš±è—æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header Component Container -->
    <div id="header-component"></div>

    <!-- 2. æœå°‹èˆ‡ Hero å€å¡Š (ç™½è‰²æ¥µç°¡é¢¨æ ¼ + åˆ†é¡ç¯©é¸) -->
    <header class="bg-white text-gray-800 py-12 md:py-20 relative overflow-hidden shadow-sm">
        <!-- è£é£¾èƒŒæ™¯åœ–ç¤º (æ”¹ç‚ºæ·¡ç°è‰²) -->
        <div class="absolute top-0 right-0 opacity-5 transform translate-x-10 -translate-y-10 pointer-events-none">
            <i class="fa-solid fa-carrot text-9xl text-gray-400"></i>
        </div>
        
        <div class="max-w-3xl mx-auto px-4 text-center relative z-10">
            <h1 class="text-3xl md:text-4xl font-bold mb-4 tracking-tight text-gray-900">
                <span class="text-green-600">æ•¸æ“š</span> è½‰åŒ–ç‚ºæ‚¨çš„å¥åº·æ±ºç­–
            </h1>
            <p class="text-gray-500 mb-8 text-lg">å¸¸è¦‹ç¾é£Ÿè¦–è¦ºåŒ–ç‡Ÿé¤Šè³‡æ–™åº«ï¼Œè¼¸å…¥é£Ÿæç«‹å³æŸ¥è©¢ã€‚</p>
            
            <!-- æœå°‹æ¡†å€å¡Š -->
            <div class="relative max-w-lg mx-auto z-30">
                <div class="relative">
                    <input type="text" id="searchInput" placeholder="è©¦è©¦çœ‹ï¼šé…ªæ¢¨ã€é›èƒ¸è‚‰ã€é®­é­š..." 
                        class="w-full pl-12 pr-4 py-4 rounded-full shadow-md border border-gray-200 bg-gray-50 text-gray-800 focus:bg-white focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all"
                        autocomplete="off">
                    <i class="fa-solid fa-search absolute left-5 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
                
                <!-- æœå°‹å»ºè­°ä¸‹æ‹‰é¸å–® (é è¨­éš±è—) -->
                <div id="searchResults" class="hidden absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl overflow-y-auto max-h-80 text-left text-gray-800 border border-gray-100 no-scrollbar">
                    <!-- JS å‹•æ…‹ç”Ÿæˆçµæœ -->
                </div>
            </div>

            <div class="mt-6 flex justify-center flex-wrap gap-2 text-sm opacity-80">
                <span class="text-gray-400 text-xs py-1">ç†±é–€æœå°‹ï¼š</span>
                <button class="quick-search-btn text-green-600 hover:text-green-800 underline decoration-green-300 decoration-2 underline-offset-2 transition" data-food="avocado">é…ªæ¢¨</button>
                <button class="quick-search-btn text-green-600 hover:text-green-800 underline decoration-green-300 decoration-2 underline-offset-2 transition" data-food="chicken">é›èƒ¸è‚‰</button>
                <button class="quick-search-btn text-green-600 hover:text-green-800 underline decoration-green-300 decoration-2 underline-offset-2 transition" data-food="pearl_milk_tea">çå¥¶</button>
            </div>

            <!-- åˆ†é¡ç¯©é¸å€å¡Š (Category Filter) -->
            <div class="mt-8">
                <p class="text-xs text-gray-400 mb-3 uppercase tracking-wider font-bold">æŒ‰åˆ†é¡ç€è¦½</p>
                <div id="categoryFilters" class="flex flex-wrap justify-center gap-2 max-w-2xl mx-auto">
                    <!-- JS å°‡æœƒå‹•æ…‹ç”Ÿæˆåˆ†é¡æŒ‰éˆ• -->
                </div>
            </div>

            <!-- å¿«é€Ÿæ¨™ç±¤ -->
           
        </div>
    </header>

    <!-- 3. ä¸»è¦å…§å®¹å€ (Main Content) -->
    <main class="max-w-6xl mx-auto px-4 py-8">
        
        <!-- åˆ†é¡ç¯©é¸çµæœå®¹å™¨ (é è¨­éš±è—) -->
        <div id="categoryResultsContainer" class="hidden grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8">
            <!-- JS å‹•æ…‹ç”Ÿæˆåˆ†é¡çµæœå¡ç‰‡ -->
        </div>

        <!-- é£Ÿç‰©è©³æƒ…å¡ç‰‡ -->
        <div id="foodDetail" class="bg-white rounded-3xl shadow-lg border border-gray-100 overflow-hidden transition-all duration-300">
            
            <!-- æ¨™é¡Œèˆ‡ä»½é‡æ§åˆ¶å€ -->
            <div class="p-6 md:p-8 border-b border-gray-100 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                <div class="flex items-center gap-4">
                    <div id="foodIcon" class="w-16 h-16 rounded-2xl bg-green-50 flex items-center justify-center text-4xl shadow-sm border border-green-100">
                        ğŸ¥‘
                    </div>
                    <div>
                        <h2 id="foodName" class="text-3xl font-bold text-gray-800">é…ªæ¢¨ (Avocado)</h2>
                        <span id="foodCategory" class="text-sm text-green-700 bg-green-100 px-2 py-1 rounded-md font-medium">æ²¹è„‚èˆ‡å …æœç¨®å­é¡</span>
                    </div>
                </div>

                <!-- ä»½é‡æ›ç®—å™¨ -->
                <div class="bg-gray-100 p-1 rounded-lg flex text-sm font-medium">
                    <button class="portion-btn px-4 py-2 rounded-md shadow-sm bg-white text-green-700 transition" data-mult="1" id="btn-100g">100g (æ¨™æº–)</button>
                    <button class="portion-btn px-4 py-2 rounded-md text-gray-500 hover:text-gray-700 transition" data-mult="1.5" id="btn-serving">1 é¡† (å»ç±½ç´„ 150g)</button>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-0 lg:gap-8">
                
                <!-- å·¦å´ï¼šæ ¸å¿ƒæ•¸æ“šèˆ‡åœ–è¡¨ -->
                <div class="lg:col-span-1 p-6 md:p-8 bg-gray-50 border-r border-gray-100">
                    <h3 class="text-lg font-bold text-gray-700 mb-6 flex items-center">
                        <i class="fa-solid fa-chart-pie mr-2 text-green-500"></i> ç‡Ÿé¤Šåˆ†ä½ˆé›·é”
                    </h3>
                    <div class="relative w-full aspect-square max-w-[300px] mx-auto">
                        <canvas id="nutritionRadar"></canvas>
                    </div>
                    <div class="mt-6 text-center">
                        <div class="text-4xl font-extrabold text-gray-800" id="caloriesDisplay">160 <span class="text-base font-normal text-gray-500">kcal</span></div>
                        <div class="text-sm text-gray-500">ç¸½ç†±é‡</div>
                    </div>
                </div>

                <!-- å³å´ï¼šè©³ç´°æ•¸æ“š (è³‡è¨Šåœ–è¡¨åŒ–) -->
                <div class="lg:col-span-2 p-6 md:p-8">
                    <h3 class="text-lg font-bold text-gray-700 mb-6 flex items-center">
                        <i class="fa-solid fa-list-check mr-2 text-green-500"></i> ç‡Ÿé¤Šç´ å„€è¡¨æ¿
                    </h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-x-12 gap-y-8">
                        
                        <!-- å·¨é‡ç‡Ÿé¤Šç´  (Macro) -->
                        <div class="space-y-5">
                            <h4 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">ä¸‰å¤§ç‡Ÿé¤Šç´ </h4>
                            
                            <!-- è›‹ç™½è³ª -->
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-gray-700">è›‹ç™½è³ª (Protein)</span>
                                    <span class="text-sm font-bold text-gray-900" id="val-protein">2g</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2.5">
                                    <div id="bar-protein" class="bg-blue-500 h-2.5 rounded-full" style="width: 10%"></div>
                                </div>
                            </div>

                            <!-- è„‚è‚ª -->
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-gray-700">ç¸½è„‚è‚ª (Fat)</span>
                                    <span class="text-sm font-bold text-gray-900" id="val-fat">14.7g</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2.5">
                                    <div id="bar-fat" class="bg-yellow-400 h-2.5 rounded-full" style="width: 70%"></div>
                                </div>
                                <p class="text-xs text-gray-500 mt-1"><i class="fa-solid fa-circle-info text-blue-400"></i> å¯Œå«å–®å…ƒä¸é£½å’Œè„‚è‚ªé…¸ï¼Œå°å¿ƒè¡€ç®¡æœ‰ç›Šã€‚</p>
                            </div>

                            <!-- ç¢³æ°´åŒ–åˆç‰© -->
                            <div>
                                <div class="flex justify-between mb-1">
                                    <span class="text-sm font-medium text-gray-700">ç¢³æ°´åŒ–åˆç‰© (Carbs)</span>
                                    <span class="text-sm font-bold text-gray-900" id="val-carbs">8.5g</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2.5">
                                    <div id="bar-carbs" class="bg-green-500 h-2.5 rounded-full" style="width: 25%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- å¾®é‡ç‡Ÿé¤Šç´ èˆ‡ç‰¹å¾µ (Micro & Highlights) -->
                        <div class="space-y-5">
                            <h4 class="text-sm font-semibold text-gray-400 uppercase tracking-wider">é‡é»å¾®é‡å…ƒç´ </h4>
                            
                            <!-- é‰€ -->
                            <div class="flex items-center p-3 bg-blue-50 rounded-lg border border-blue-100">
                                <div class="p-2 bg-blue-100 rounded-full text-blue-600 mr-3">
                                    <i class="fa-solid fa-bolt"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-600">é‰€ (Potassium)</div>
                                    <div class="text-lg font-bold text-gray-800" id="val-k">485mg</div>
                                </div>
                                <div class="text-xs font-bold text-white bg-blue-500 px-2 py-1 rounded">é«˜</div>
                            </div>

                            <!-- è†³é£Ÿçº–ç¶­ -->
                            <div class="flex items-center p-3 bg-green-50 rounded-lg border border-green-100">
                                <div class="p-2 bg-green-100 rounded-full text-green-600 mr-3">
                                    <i class="fa-solid fa-seedling"></i>
                                </div>
                                <div class="flex-1">
                                    <div class="text-sm font-medium text-gray-600">è†³é£Ÿçº–ç¶­ (Fiber)</div>
                                    <div class="text-lg font-bold text-gray-800" id="val-fiber">6.7g</div>
                                </div>
                                <div class="text-xs font-bold text-white bg-green-500 px-2 py-1 rounded">å„ª</div>
                            </div>
                        </div>

                    </div>
                    
                    <!-- çµè«–/AI Summary -->
                    <div class="mt-8 bg-gray-800 text-white p-4 rounded-xl flex gap-3 items-start shadow-md">
                        <i class="fa-solid fa-robot mt-1 text-green-400"></i>
                        <div>
                            <h5 class="font-bold text-sm text-green-400 mb-1">NutriBot çŸ­è©•ï¼š</h5>
                            <p class="text-sm leading-relaxed text-gray-300" id="ai-summary">
                                é€™æ˜¯éå¸¸å„ªè³ªçš„æ²¹è„‚ä¾†æºï¼é›–ç„¶ç†±é‡ç¨é«˜ï¼Œä½†å¯Œå«è†³é£Ÿçº–ç¶­èˆ‡é‰€é›¢å­ã€‚å»ºè­°æ­é…é›èƒ¸è‚‰é£Ÿç”¨ï¼Œé©åˆç”Ÿé…®é£²é£Ÿæˆ–å¢è‚Œæ¸›è„‚æ—ç¾¤ã€‚
                            </p>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </main>

    <!-- Footer Component Container -->
    <div id="footer-component"></div>

    <!-- Load Website Components -->
    <script src="../../assets/js/deus-header-component.js"></script>
    <script src="../../assets/js/deus-footer-component.js"></script>

    <!-- JavaScript é‚è¼¯å€ -->
    <script>
        // --- 1. é»ƒé‡‘è³‡æ–™åº« (æ ¡æ­£ç‰ˆ) ---
        // ç‚ºäº†ç¢ºä¿é è¦½çµ•å°æ­£å¸¸ï¼Œæˆ‘å€‘å°‡è³‡æ–™æ•´åˆå› HTML æª”æ¡ˆä¸­ã€‚
        
        const foodDatabase = {
            // === [A] åŸå‹é£Ÿç‰© - æ°´æœé¡ (Fruits) ===
            'apple': { name: 'è˜‹æœ (å¸¶çš®)', engName: 'Apple', icon: 'ğŸ', category: 'æ°´æœé¡', portionName: '1 é¡† (ç´„ 150g)', portionWeight: 150, base: { calories: 52, protein: 0.3, fat: 0.2, carbs: 14, fiber: 2.4, potassium: 107 }, summary: 'ã€Œä¸€å¤©ä¸€è˜‹æœï¼Œé†«ç”Ÿé é›¢æˆ‘ã€ã€‚å¸¶çš®åƒèƒ½æ”å–æ›´å¤šæ§²çš®ç´ èˆ‡çº–ç¶­ã€‚å±¬æ–¼ä½ GI æ°´æœã€‚' },
            'banana': { name: 'é¦™è•‰', engName: 'Banana', icon: 'ğŸŒ', category: 'æ°´æœé¡', portionName: '1 æ ¹ (ä¸­å‹ç´„ 120g)', portionWeight: 120, base: { calories: 89, protein: 1.1, fat: 0.3, carbs: 23, fiber: 2.6, potassium: 358 }, summary: 'é‹å‹•å‰å¾Œçš„æœ€ä½³è£œçµ¦ï¼å¯Œå«é‰€é›¢å­é é˜²æŠ½ç­‹ï¼Œä¸”èƒ½å¿«é€Ÿè£œå……èƒ½é‡ã€‚' },
            'guava': { name: 'èŠ­æ¨‚ (çç èŠ­æ¨‚)', engName: 'Guava', icon: 'ğŸˆ', category: 'æ°´æœé¡', portionName: '1 é¡† (ç´„ 300g)', portionWeight: 300, base: { calories: 38, protein: 0.8, fat: 0.1, carbs: 9.7, fiber: 3.3, potassium: 176 }, summary: 'å°ç£æ°´æœä¹‹å† ï¼ç¶­ä»–å‘½ C å«é‡æ¥µé«˜ï¼Œç†±é‡ä½ä¸”çº–ç¶­é«˜ï¼Œæ˜¯æ¸›é‡æ—ç¾¤çš„ç¥éšŠå‹ã€‚' },
            'kiwi': { name: 'å¥‡ç•°æœ', engName: 'Kiwi', icon: 'ğŸ¥', category: 'æ°´æœé¡', portionName: '1 é¡† (ç´„ 90g)', portionWeight: 90, base: { calories: 61, protein: 1.1, fat: 0.5, carbs: 15, fiber: 3, potassium: 312 }, summary: 'å¯Œå«å¥‡ç•°æœé…µç´ ï¼Œèƒ½å¹«åŠ©è›‹ç™½è³ªæ¶ˆåŒ–ã€‚ç¡å‰åƒæœ‰åŠ©æ–¼æå‡ç¡çœ å“è³ªã€‚' },
            'pineapple': { name: 'é³³æ¢¨', engName: 'Pineapple', icon: 'ğŸ', category: 'æ°´æœé¡', portionName: '1 ç¢— (åˆ‡å¡Šç´„ 150g)', portionWeight: 150, base: { calories: 50, protein: 0.5, fat: 0.1, carbs: 13, fiber: 1.4, potassium: 109 }, summary: 'å«æœ‰é³³æ¢¨é…µç´ ï¼Œé©åˆæ­é…è‚‰é¡æ–™ç†å¹«åŠ©æ¶ˆåŒ–ã€‚ä½†ç³–åˆ†ç¨é«˜ï¼Œç³–å°¿ç—…æ‚£è€…éœ€æ§åˆ¶ä»½é‡ã€‚' },
            'watermelon': { name: 'è¥¿ç“œ', engName: 'Watermelon', icon: 'ğŸ‰', category: 'æ°´æœé¡', portionName: '1 ç‰‡ (ç´„ 250g)', portionWeight: 250, base: { calories: 30, protein: 0.6, fat: 0.2, carbs: 8, fiber: 0.4, potassium: 112 }, summary: 'æ¶ˆæš‘è–å“ï¼Œæ°´åˆ†å«é‡è¶…é 90%ã€‚å«æœ‰ç“œæ°¨é…¸ï¼Œæœ‰åŠ©æ–¼æ”¾é¬†è¡€ç®¡ã€‚' },
            'mango': { name: 'æ„›æ–‡èŠ’æœ', engName: 'Mango', icon: 'ğŸ¥­', category: 'æ°´æœé¡', portionName: '1 é¡† (ç´„ 250g)', portionWeight: 250, base: { calories: 60, protein: 0.8, fat: 0.4, carbs: 15, fiber: 1.6, potassium: 168 }, summary: 'å¤å­£é™å®šçš„ç”œèœœæ»‹å‘³ï¼Œå¯Œå«ç¶­ç”Ÿç´  A å°çœ¼ç›å¥½ï¼Œä½†å±¬æ–¼ä¸­é«˜ GI æ°´æœï¼Œéœ€é©é‡ã€‚' },
            'dragon_fruit': { name: 'ç«é¾æœ (ç´…è‚‰)', engName: 'Dragon Fruit', icon: 'ğŸ”´', category: 'æ°´æœé¡', portionName: '1 é¡† (ç´„ 300g)', portionWeight: 300, base: { calories: 50, protein: 1.2, fat: 0.4, carbs: 12, fiber: 1.9, potassium: 220 }, summary: 'å¯Œå«ç”œèœç´…ç´ ï¼Œå…·æŠ—æ°§åŒ–æ•ˆæœã€‚ç´…è‚‰ç¨®é€šå¸¸å«æœ‰è¼ƒå¤šè†³é£Ÿçº–ç¶­ï¼ŒåŠ©æ’ä¾¿æ•ˆæœå¼·ã€‚' },
            'papaya': { name: 'æœ¨ç“œ', engName: 'Papaya', icon: 'ğŸ¥£', category: 'æ°´æœé¡', portionName: '1/2 é¡† (ç´„ 200g)', portionWeight: 200, base: { calories: 43, protein: 0.5, fat: 0.3, carbs: 11, fiber: 1.7, potassium: 182 }, summary: 'æœ¨ç“œé…µç´ æœ‰åŠ©æ–¼åˆ†è§£è›‹ç™½è³ªã€‚é¡è‰²è¶Šç´…ï¼ŒÎ²-èƒ¡è˜¿è””ç´ å«é‡è¶Šé«˜ã€‚' },
            'tomato_cherry': { name: 'è–å¥³ç•ªèŒ„', engName: 'Cherry Tomato', icon: 'ğŸ…', category: 'æ°´æœé¡', portionName: '1 ä»½ (ç´„ 150g)', portionWeight: 150, base: { calories: 35, protein: 1.0, fat: 0.2, carbs: 8, fiber: 1.5, potassium: 240 }, summary: 'æ–¹ä¾¿æ”œå¸¶çš„é«˜çº–é›¶é£Ÿã€‚å¯Œå«èŒ„ç´…ç´ ï¼Œä¸”å‡ç³–æŒ‡æ•¸ä½ã€‚' },
            'lemon': { name: 'æª¸æª¬', engName: 'Lemon', icon: 'ğŸ‹', category: 'æ°´æœé¡', portionName: '1 é¡† (æ±æ¶²ç´„ 30g)', portionWeight: 30, base: { calories: 30, protein: 0.6, fat: 0.2, carbs: 9, fiber: 0.3, potassium: 145 }, summary: 'å¯Œå«æª¸æª¬é…¸èˆ‡ç¶­ç”Ÿç´  Cï¼Œæœ‰åŠ©æ–¼ä»£è¬ã€‚é€šå¸¸ä½œç‚ºèª¿å‘³ï¼Œç†±é‡æ¥µä½ã€‚' },
            'grape': { name: 'è‘¡è„ (å·¨å³°)', engName: 'Grape', icon: 'ğŸ‡', category: 'æ°´æœé¡', portionName: '1 ä»½ (ç´„ 130g)', portionWeight: 130, base: { calories: 69, protein: 0.7, fat: 0.2, carbs: 18, fiber: 0.9, potassium: 191 }, summary: 'çš®èˆ‡ç±½å«æœ‰è±å¯Œçš„èŠ±é’ç´ èˆ‡ç™½è—œè˜†é†‡ã€‚å»ºè­°æ¸…æ´—ä¹¾æ·¨å¾Œé€£çš®é£Ÿç”¨ã€‚' },
            'orange': { name: 'æŸ³æ©™', engName: 'Orange', icon: 'ğŸŠ', category: 'æ°´æœé¡', portionName: '1 é¡† (ç´„ 150g)', portionWeight: 150, base: { calories: 47, protein: 0.9, fat: 0.1, carbs: 12, fiber: 2.4, potassium: 181 }, summary: 'å¸¸è¦‹çš„ç¶­ä»–å‘½ C ä¾†æºã€‚å»ºè­°ç›´æ¥åƒæœè‚‰å„ªæ–¼å–æœæ±ï¼Œä»¥ä¿ç•™çº–ç¶­ã€‚' },
            'strawberry': { name: 'è‰è“', engName: 'Strawberry', icon: 'ğŸ“', category: 'æ°´æœé¡', portionName: '1 ä»½ (ç´„ 160g)', portionWeight: 160, base: { calories: 32, protein: 0.7, fat: 0.3, carbs: 8, fiber: 2.0, potassium: 153 }, summary: 'ä½ç†±é‡ä¸”ä½ GI çš„æ°´æœï¼Œå¯Œå«è‘‰é…¸èˆ‡ç¶­ç”Ÿç´  Cã€‚' },
            'passion_fruit': { name: 'ç™¾é¦™æœ', engName: 'Passion Fruit', icon: 'ğŸŸ£', category: 'æ°´æœé¡', portionName: '2 é¡† (ç´„ 100g)', portionWeight: 100, base: { calories: 66, protein: 2.2, fat: 0.7, carbs: 13, fiber: 10, potassium: 200 }, summary: 'è†³é£Ÿçº–ç¶­ä¹‹ç‹ï¼ç™¾é¦™æœçš„ç±½å’¬ç¢åƒï¼Œçº–ç¶­å«é‡æ¥µé«˜ï¼Œæœ‰åŠ©è…¸é“å¥åº·ã€‚' },

            // === [B] åŸå‹é£Ÿç‰© - è”¬èœèˆ‡æ ¹è– (Vegetables) ===
            'broccoli': { name: 'èŠ±æ¤°èœ', engName: 'Broccoli', icon: 'ğŸ¥¦', category: 'è”¬èœé¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 33, protein: 3.7, fat: 0.1, carbs: 6, fiber: 3, potassium: 370 }, summary: 'åå­—èŠ±ç§‘è”¬èœä¹‹ç‹ï¼Œå«è˜¿è””ç¡«ç´ ï¼ŒæŠ—æ°§åŒ–èƒ½åŠ›å¼·ã€‚' },
            'cabbage': { name: 'é«˜éº—èœ', engName: 'Cabbage', icon: 'ğŸ¥¬', category: 'è”¬èœé¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 25, protein: 1.3, fat: 0.1, carbs: 6, fiber: 2.5, potassium: 170 }, summary: 'å°ç£åœ‹æ°‘è”¬èœï¼Œå«æœ‰ç¶­ç”Ÿç´  U (S-ç”²åŸºè›‹æ°¨é…¸)ï¼Œæœ‰åŠ©æ–¼ä¿®å¾©èƒƒé»è†œã€‚' },
            'spinach': { name: 'è èœ', engName: 'Spinach', icon: 'ğŸ¥¬', category: 'è”¬èœé¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 23, protein: 2.9, fat: 0.4, carbs: 3.6, fiber: 2.2, potassium: 558 }, summary: 'å¤§åŠ›æ°´æ‰‹çš„æœ€æ„›ã€‚é‰€é›¢å­èˆ‡è‘‰é…¸å«é‡æ¥µé«˜ï¼Œä½†è‰é…¸è¼ƒé«˜ï¼ŒçµçŸ³æ‚£è€…ç•™æ„ã€‚' },
            'sweet_potato_leaves': { name: 'åœ°ç“œè‘‰', engName: 'Sweet Potato Leaves', icon: 'ğŸŒ¿', category: 'è”¬èœé¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 22, protein: 3.2, fat: 0.3, carbs: 4, fiber: 3.3, potassium: 400 }, summary: 'CP å€¼æœ€é«˜çš„è”¬èœä¹‹ä¸€ã€‚å¤šé…šå«é‡è±å¯Œï¼ŒæŠ—æ°§åŒ–åŠ›ä¸è¼¸çµ¦æ·±è‰²è“æœã€‚' },
            'carrot': { name: 'èƒ¡è˜¿è””', engName: 'Carrot', icon: 'ğŸ¥•', category: 'è”¬èœé¡', portionName: '1/2 æ ¹ (ç´„ 80g)', portionWeight: 80, base: { calories: 41, protein: 0.9, fat: 0.2, carbs: 10, fiber: 2.8, potassium: 320 }, summary: 'å¯Œå« Î²-èƒ¡è˜¿è””ç´ ï¼Œåœ¨é«”å…§è½‰åŒ–ç‚ºç¶­ç”Ÿç´  Aï¼Œæ˜¯è­·çœ¼å¿…å‚™é£Ÿæã€‚åŠ æ²¹çƒ¹èª¿å¸æ”¶ç‡æ›´å¥½ã€‚' },
            'corn': { name: 'ç‰ç±³', engName: 'Corn', icon: 'ğŸŒ½', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 æ ¹ (ç´„ 140g)', portionWeight: 140, base: { calories: 96, protein: 3.5, fat: 1.5, carbs: 21, fiber: 2.4, potassium: 270 }, summary: 'æ³¨æ„ï¼ç‰ç±³æ˜¯æ¾±ç²‰ä¸æ˜¯è”¬èœã€‚å«æœ‰è‘‰é»ƒç´ èˆ‡ç‰ç±³é»ƒç´ ã€‚' },
            'sweet_potato': { name: 'åœ°ç“œ', engName: 'Sweet Potato', icon: 'ğŸ ', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 æ¢ (ä¸­å‹ç´„ 165g)', portionWeight: 165, base: { calories: 130, protein: 1.9, fat: 0.2, carbs: 29.5, fiber: 2.4, potassium: 280 }, summary: 'ä½ GI å„ªè³ªæ¾±ç²‰ã€‚å¸¶çš®åƒçº–ç¶­æ›´å¤šã€‚å†·å»å¾Œæœƒç”¢ç”ŸæŠ—æ€§æ¾±ç²‰ï¼Œç†±é‡æ›´ä½ã€‚' },
            'potato': { name: 'é¦¬éˆ´è–¯', engName: 'Potato', icon: 'ğŸ¥”', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 é¡† (ç´„ 150g)', portionWeight: 150, base: { calories: 77, protein: 2.0, fat: 0.1, carbs: 17, fiber: 2.2, potassium: 421 }, summary: 'è¢«æ²¹ç‚¸æ±¡ååŒ–çš„å¥½æ¾±ç²‰ã€‚è’¸çƒ¤é¦¬éˆ´è–¯ç†±é‡æ¯”ç™½é£¯ä½ï¼Œä¸”é£½è¶³æ„Ÿæ¥µé«˜ã€‚' },
            'cucumber': { name: 'å°é»ƒç“œ', engName: 'Cucumber', icon: 'ğŸ¥’', category: 'è”¬èœé¡', portionName: '1 æ ¹ (ç´„ 100g)', portionWeight: 100, base: { calories: 15, protein: 0.7, fat: 0.1, carbs: 3.6, fiber: 0.5, potassium: 147 }, summary: 'æ¸›è‚¥è–å“ï¼Œå«æ°´é‡æ¥µé«˜ã€‚å«æœ‰ç£·è„‚é…¶ï¼Œæœ‰åŠ©æ–¼è„‚è‚ªä»£è¬ã€‚' },
            'eggplant': { name: 'èŒ„å­', engName: 'Eggplant', icon: 'ğŸ†', category: 'è”¬èœé¡', portionName: '1 æ¢ (ç´„ 100g)', portionWeight: 100, base: { calories: 25, protein: 1.0, fat: 0.2, carbs: 6, fiber: 3.0, potassium: 229 }, summary: 'ç´«è‰²å¤–çš®å«æœ‰èŠ±é’ç´ ã€‚è³ªåœ°åƒæµ·ç¶¿å®¹æ˜“å¸æ²¹ï¼Œå»ºè­°æ¸…è’¸æˆ–æ°´ç…®ã€‚' },
            'mushroom_shiitake': { name: 'é¦™è‡', engName: 'Shiitake Mushroom', icon: 'ğŸ„', category: 'è”¬èœé¡', portionName: '1 ä»½ (ç´„ 80g)', portionWeight: 80, base: { calories: 34, protein: 2.2, fat: 0.5, carbs: 7, fiber: 2.5, potassium: 304 }, summary: 'å«æœ‰å¤šé†£é«”èˆ‡ç¶­ç”Ÿç´  D å‰é©…ç‰©ï¼ˆæ›¬å¤ªé™½å¾Œè½‰åŒ–ï¼‰ã€‚èƒ½æå‡å…ç–«åŠ›ã€‚' },
            'onion': { name: 'æ´‹è”¥', engName: 'Onion', icon: 'ğŸ§…', category: 'è”¬èœé¡', portionName: '1/2 é¡† (ç´„ 100g)', portionWeight: 100, base: { calories: 40, protein: 1.1, fat: 0.1, carbs: 9, fiber: 1.7, potassium: 146 }, summary: 'å«æœ‰æ§²çš®ç´ èˆ‡ç¡«åŒ–ç‰©ï¼Œæœ‰åŠ©æ–¼æŠ—éæ•èˆ‡æ®ºèŒã€‚' },
            'garlic': { name: 'å¤§è’œ', engName: 'Garlic', icon: 'ğŸ§„', category: 'è¾›é¦™æ–™', portionName: '1 ç“£ (ç´„ 5g)', portionWeight: 5, base: { calories: 149, protein: 6.4, fat: 0.5, carbs: 33, fiber: 2.1, potassium: 401 }, summary: 'å«æœ‰å¤§è’œç´ ï¼Œæ®ºèŒæŠ—æ¯’ã€‚åˆ‡ç¢éœç½® 10 åˆ†é˜å¾Œçƒ¹èª¿ï¼Œæ´»æ€§æœ€å¼·ã€‚' },
            'lettuce': { name: 'ç¾ç”Ÿèœ', engName: 'Lettuce', icon: 'ğŸ¥—', category: 'è”¬èœé¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 14, protein: 0.9, fat: 0.1, carbs: 3, fiber: 1.2, potassium: 141 }, summary: 'æ²™æ‹‰èˆ‡æ¼¢å ¡çš„é…è§’ã€‚ç†±é‡æ¥µä½ï¼Œå¹¾ä¹å…¨æ˜¯æ°´ä»½ã€‚' },
            'water_spinach': { name: 'ç©ºå¿ƒèœ', engName: 'Water Spinach', icon: 'ğŸŒ¿', category: 'è”¬èœé¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 19, protein: 2.6, fat: 0.2, carbs: 3, fiber: 2.1, potassium: 312 }, summary: 'å«éˆ£é‡åœ¨è”¬èœä¸­ååˆ—å‰èŒ…ã€‚ç²—çº–ç¶­æœ‰åŠ©æ–¼è…¸é“è •å‹•ã€‚' },

            // === [C] å„ªè³ªè›‹ç™½è³ª (Proteins) ===
            'chicken': { name: 'é›èƒ¸è‚‰', engName: 'Chicken Breast', icon: 'ğŸ—', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 ç‰‡ (ç´„ 150g)', portionWeight: 150, base: { calories: 165, protein: 31, fat: 3.6, carbs: 0, fiber: 0, potassium: 256 }, summary: 'å¢è‚Œæ¸›è„‚ CP å€¼æœ€é«˜çš„é£Ÿæã€‚' },
            'chicken_thigh': { name: 'é›è…¿è‚‰ (å»çš®)', engName: 'Chicken Thigh', icon: 'ğŸ—', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 éš» (ç´„ 180g)', portionWeight: 180, base: { calories: 150, protein: 19, fat: 8, carbs: 0, fiber: 0, potassium: 240 }, summary: 'å£æ„Ÿæ¯”é›èƒ¸å«©ï¼Œä½†è„‚è‚ªç¨é«˜ã€‚å»çš®å¾Œå…¶å¯¦ä¹Ÿæ˜¯ä¸éŒ¯çš„è›‹ç™½è³ªä¾†æºã€‚' },
            'salmon': { name: 'é®­é­š', engName: 'Salmon', icon: 'ğŸŸ', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 ç‰‡ (ç´„ 200g)', portionWeight: 200, base: { calories: 208, protein: 20, fat: 13, carbs: 0, fiber: 0, potassium: 363 }, summary: 'Omega-3 è„‚è‚ªé…¸å¯¶åº«ã€‚' },
            'beef_shank': { name: 'ç‰›è…±', engName: 'Beef Shank', icon: 'ğŸ¥©', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 125, protein: 20, fat: 4, carbs: 2, fiber: 0, potassium: 300 }, summary: 'ä½è„‚ç‰›è‚‰çš„å¥½é¸æ“‡ã€‚å¯Œå«éµè³ªèˆ‡é‹…ï¼Œé©åˆæ»·å‘³ã€‚' },
            'pork_belly': { name: 'è±¬äº”èŠ±è‚‰', engName: 'Pork Belly', icon: 'ğŸ¥“', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 518, protein: 9, fat: 53, carbs: 0, fiber: 0, potassium: 180 }, summary: 'âš ï¸ ç†±é‡ç‚¸å½ˆã€‚è„‚è‚ªå«é‡æ¥µé«˜ï¼Œé›–ç„¶ç¾å‘³ä½†å»ºè­°é©é‡ã€‚' },
            'egg': { name: 'é›è›‹', engName: 'Egg', icon: 'ğŸ¥š', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 é¡† (ç´„ 55g)', portionWeight: 55, base: { calories: 139, protein: 12.7, fat: 8.9, carbs: 1.7, fiber: 0, potassium: 133 }, summary: 'ç”Ÿç‰©åƒ¹æœ€é«˜çš„è›‹ç™½è³ªã€‚' },
            'tofu': { name: 'æ¿è±†è…', engName: 'Tofu', icon: 'ğŸ§Š', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 å¡Š (ç´„ 100g)', portionWeight: 100, base: { calories: 88, protein: 8.5, fat: 3.4, carbs: 6, fiber: 0.6, potassium: 150 }, summary: 'æ¤ç‰©æ€§è›‹ç™½é¦–é¸ã€‚æ¿è±†è…å«éˆ£é‡æ¯”å«©è±†è…é«˜å‡ºè¨±å¤šã€‚' },
            'soy_milk': { name: 'ç„¡ç³–è±†æ¼¿', engName: 'Soy Milk (Unsweetened)', icon: 'ğŸ¥›', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 æ¯ (ç´„ 240ml)', portionWeight: 240, base: { calories: 35, protein: 3.6, fat: 1.9, carbs: 0.8, fiber: 1.3, potassium: 120 }, summary: 'æ–¹ä¾¿å¿«é€Ÿè£œå……è›‹ç™½è³ªã€‚å«æœ‰å¤§è±†ç•°é»ƒé…®ã€‚' },
            'shrimp': { name: 'ç™½è¦', engName: 'Shrimp', icon: 'ğŸ¦', category: 'è±†é­šè›‹è‚‰é¡', portionName: '10 éš» (ç´„ 100g)', portionWeight: 100, base: { calories: 99, protein: 24, fat: 0.3, carbs: 0.2, fiber: 0, potassium: 259 }, summary: 'ä½è„‚é«˜è›‹ç™½ã€‚è†½å›ºé†‡ä¸»è¦åœ¨é ­éƒ¨èˆ‡åµï¼Œè¦è‚‰æœ¬èº«è†½å›ºé†‡é‚„å¥½ã€‚' },
            'clam': { name: 'è›¤èœŠ', engName: 'Clam', icon: 'ğŸš', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 ç¢— (å»æ®¼ç´„ 100g)', portionWeight: 100, base: { calories: 74, protein: 12.8, fat: 1.0, carbs: 3, fiber: 0, potassium: 628 }, summary: 'é‹…èˆ‡éµå«é‡è±å¯Œã€‚èœ†ç²¾çš„ä¾†æºï¼Œè­·è‚å¥½é£Ÿæã€‚' },
            'mackerel': { name: 'é¯–é­š', engName: 'Mackerel', icon: 'ğŸŸ', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 ç‰‡ (ç´„ 150g)', portionWeight: 150, base: { calories: 205, protein: 18, fat: 13, carbs: 0, fiber: 0, potassium: 310 }, summary: 'å¹³åƒ¹çš„æ·±æµ·é­šã€‚Omega-3 å«é‡ä¸è¼¸é®­é­šï¼ŒCP å€¼æ¥µé«˜ã€‚' },
            'cod': { name: 'é±ˆé­š', engName: 'Cod', icon: 'ğŸŸ', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 ç‰‡ (ç´„ 200g)', portionWeight: 200, base: { calories: 82, protein: 18, fat: 0.7, carbs: 0, fiber: 0, potassium: 340 }, summary: 'è‚‰è³ªç´°å«©ï¼Œè„‚è‚ªä½ï¼Œéå¸¸é©åˆè€äººèˆ‡å°å­©ã€‚' },
            'edamame': { name: 'æ¯›è±†', engName: 'Edamame', icon: 'ğŸŒ±', category: 'è±†é­šè›‹è‚‰é¡', portionName: '1 ç¢— (ç´„ 100g)', portionWeight: 100, base: { calories: 125, protein: 13, fat: 6, carbs: 11, fiber: 8, potassium: 500 }, summary: 'ã€Œæ¤ç‰©ä¹‹è‚‰ã€ã€‚è›‹ç™½è³ªèˆ‡çº–ç¶­éƒ½éå¸¸é«˜ï¼Œå¾ˆæ£’çš„æ¶¼æ‹Œèœã€‚' },
            'greek_yogurt': { name: 'å¸Œè‡˜å„ªæ ¼', engName: 'Greek Yogurt', icon: 'ğŸ¥£', category: 'ä¹³å“é¡', portionName: '1 ä»½ (ç´„ 170g)', portionWeight: 170, base: { calories: 59, protein: 10, fat: 0.4, carbs: 3.6, fiber: 0, potassium: 141 }, summary: 'éæ¿¾æ‰ä¹³æ¸…ï¼Œè›‹ç™½è³ªå«é‡æ˜¯ä¸€èˆ¬å„ªæ ¼çš„å…©å€ã€‚' },
            'avocado': { name: 'é…ªæ¢¨', engName: 'Avocado', icon: 'ğŸ¥‘', category: 'æ²¹è„‚é¡', portionName: '1 é¡† (ç´„ 150g)', portionWeight: 150, base: { calories: 160, protein: 2, fat: 14.7, carbs: 8.5, fiber: 6.7, potassium: 485 }, summary: 'è¢«é‡‘æ°ä¸–ç•Œç´€éŒ„åˆ—ç‚ºæœ€ç‡Ÿé¤Šçš„æ°´æœã€‚é›–æ˜¯æ°´æœä½†æ­¸é¡ç‚ºæ²¹è„‚ã€‚' },

            // === [D] ä¸»é£Ÿèˆ‡æ¾±ç²‰ (Grains) ===
            'rice': { name: 'ç™½é£¯', engName: 'White Rice', icon: 'ğŸš', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 ç¢— (ç´„ 160g)', portionWeight: 160, base: { calories: 130, protein: 2.7, fat: 0.3, carbs: 28, fiber: 0.4, potassium: 35 }, summary: 'èƒ½é‡çš„ä¸»è¦ä¾†æºã€‚ç²¾ç·»ç¨‹åº¦é«˜ï¼ŒGI å€¼è¼ƒé«˜ã€‚' },
            'brown_rice': { name: 'ç³™ç±³é£¯', engName: 'Brown Rice', icon: 'ğŸŒ¾', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 ç¢— (ç´„ 160g)', portionWeight: 160, base: { calories: 112, protein: 2.6, fat: 0.9, carbs: 23, fiber: 1.8, potassium: 43 }, summary: 'ä¿ç•™äº†èƒšèŠ½èˆ‡ç±³ç³ ï¼Œç¶­ç”Ÿç´  B ç¾¤èˆ‡çº–ç¶­æ¯”ç™½é£¯è±å¯Œã€‚' },
            'oatmeal': { name: 'ç‡•éº¥ç‰‡', engName: 'Oatmeal', icon: 'ğŸ¥£', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 ä»½ (ç´„ 40g)', portionWeight: 40, base: { calories: 389, protein: 16, fat: 6, carbs: 66, fiber: 10, potassium: 429 }, summary: 'å«æœ‰ Î²-è‘¡èšé†£ï¼Œæœ‰åŠ©æ–¼é™ä½è†½å›ºé†‡ã€‚' },
            'toast': { name: 'åå¸', engName: 'Toast', icon: 'ğŸ', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 ç‰‡ (ç´„ 50g)', portionWeight: 50, base: { calories: 290, protein: 9, fat: 5, carbs: 50, fiber: 2, potassium: 100 }, summary: 'è£½ä½œéç¨‹é€šå¸¸æœƒåŠ ç³–èˆ‡æ²¹ï¼Œç†±é‡æ¯”ç™½é£¯é«˜ï¼Œå…©ç‰‡åå¸ç´„ç­‰æ–¼ä¸€ç¢—é£¯ã€‚' },
            'noodle': { name: 'é™½æ˜¥éºµæ¢', engName: 'Noodles', icon: 'ğŸœ', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 ç¢— (ç†Ÿç´„ 200g)', portionWeight: 200, base: { calories: 130, protein: 4, fat: 0.5, carbs: 27, fiber: 1, potassium: 30 }, summary: 'éºµé£Ÿé€šå¸¸éˆ‰å«é‡è¼ƒé«˜ï¼Œä¸”å®¹æ˜“å¸é™„æ¹¯æ±æ²¹è„‚ã€‚' },
            'pumpkin': { name: 'å—ç“œ', engName: 'Pumpkin', icon: 'ğŸƒ', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 69, protein: 1.8, fat: 0.2, carbs: 17, fiber: 2.5, potassium: 400 }, summary: 'å«æ°´é‡é«˜çš„æ¾±ç²‰ï¼Œç†±é‡åªæœ‰é£¯çš„ä¸€åŠã€‚å¯Œå«ç¶­ç”Ÿç´  Aã€‚' },
            'taro': { name: 'èŠ‹é ­', engName: 'Taro', icon: 'ğŸŸ£', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 ä»½ (ç´„ 100g)', portionWeight: 100, base: { calories: 128, protein: 2.5, fat: 0.2, carbs: 30, fiber: 2.8, potassium: 500 }, summary: 'çº–ç¶­å«é‡é«˜çš„æ¾±ç²‰ã€‚é‰€å«é‡ä¹Ÿå¾ˆé«˜ï¼Œæœ‰åŠ©æ¶ˆæ°´è…«ã€‚' },
            'quinoa': { name: 'è—œéº¥', engName: 'Quinoa', icon: 'ğŸŒ¾', category: 'å…¨ç©€é›œç³§é¡', portionName: '1 ç¢— (ç†Ÿç´„ 150g)', portionWeight: 150, base: { calories: 120, protein: 4.4, fat: 1.9, carbs: 21, fiber: 2.8, potassium: 172 }, summary: 'ã€Œè¶…ç´šé£Ÿç‰©ã€ã€‚å«æœ‰å®Œæ•´èƒºåŸºé…¸ï¼Œæ˜¯å„ªè³ªçš„æ¤ç‰©æ€§è›‹ç™½æ¾±ç²‰ã€‚' },
            
            // === [E] æ—©é¤èˆ‡å°åƒ (Street Food & Breakfast) ===
            // ä¿®æ­£èªªæ˜ï¼šä¸‹åˆ— Base æ•¸å€¼å·²é‡æ–°æ ¡æ­£ç‚ºã€Œæ¯ 100gã€çš„ä¼°è¨ˆå€¼
            'tuna_danbing': { name: 'é®ªé­šè›‹é¤…', engName: 'Tuna Danbing', icon: 'ğŸ¥ª', category: 'æ—©é¤é¡', portionName: '1 ä»½ (ç´„ 200g)', portionWeight: 200, base: { calories: 180, protein: 8, fat: 9, carbs: 18, fiber: 0.5, potassium: 100 }, summary: 'æ—©é¤åº—çš„å¥½é¸æ“‡ã€‚é®ªé­šæä¾›å„ªè³ªè›‹ç™½ï¼Œæ¯”åŸ¹æ ¹æˆ–ç†±ç‹—å¥åº·ã€‚ä¸€ä»½ç†±é‡ç´„ 360 å¤§å¡ã€‚' },
            'bacon_danbing': { name: 'åŸ¹æ ¹è›‹é¤…', engName: 'Bacon Danbing', icon: 'ğŸ¥“', category: 'æ—©é¤é¡', portionName: '1 ä»½ (ç´„ 200g)', portionWeight: 200, base: { calories: 230, protein: 7, fat: 14, carbs: 18, fiber: 0.3, potassium: 80 }, summary: 'åŸ¹æ ¹å±¬æ–¼åŠ å·¥è‚‰å“èˆ‡æ²¹è„‚é¡ï¼Œéˆ‰èˆ‡é£½å’Œè„‚è‚ªè¼ƒé«˜ã€‚ä¸€ä»½ç†±é‡ç´„ 460 å¤§å¡ã€‚' },
            'soy_milk_sweet': { name: 'å«ç³–è±†æ¼¿', engName: 'Soy Milk (Sweet)', icon: 'ğŸ¥›', category: 'æ—©é¤é¡', portionName: '1 æ¯ (350ml)', portionWeight: 350, base: { calories: 58, protein: 3.0, fat: 1.5, carbs: 8.5, fiber: 1, potassium: 100 }, summary: 'é›–ç„¶æœ‰è›‹ç™½è³ªï¼Œä½†é¡å¤–æ·»åŠ çš„ç³–æœƒè®“è¡€ç³–æ³¢å‹•è¼ƒå¤§ã€‚' },
            'radish_cake': { name: 'è˜¿è””ç³•', engName: 'Radish Cake', icon: 'â¬œ', category: 'æ—©é¤é¡', portionName: '2 ç‰‡ (ç´„ 150g)', portionWeight: 150, base: { calories: 150, protein: 2, fat: 6, carbs: 22, fiber: 1, potassium: 80 }, summary: 'å¹¾ä¹éƒ½æ˜¯æ¾±ç²‰èˆ‡æ²¹è„‚ï¼Œè›‹ç™½è³ªå«é‡ä½ã€‚å»ºè­°åŠ é¡†è›‹ã€‚ç…éå¾Œå¸æ²¹ï¼Œç†±é‡æœƒæ¯”æ¸…è’¸é«˜ã€‚' },
            'fan_tuan': { name: 'é£¯ç³°', engName: 'Rice Ball', icon: 'ğŸ™', category: 'æ—©é¤é¡', portionName: '1 å€‹ (ç´„ 200g)', portionWeight: 200, base: { calories: 250, protein: 6, fat: 10, carbs: 45, fiber: 2, potassium: 100 }, summary: 'ç³¯ç±³GIå€¼é«˜ä¸”é›£æ¶ˆåŒ–ã€‚å…§é¤¡çš„æ²¹æ¢æ˜¯ç†±é‡åœ°é›·ã€‚' },
            'youtiao': { name: 'æ²¹æ¢', engName: 'Fried Dough Stick', icon: 'ğŸ¥–', category: 'æ—©é¤é¡', portionName: '1 æ ¹ (ç´„ 50g)', portionWeight: 50, base: { calories: 580, protein: 7, fat: 40, carbs: 50, fiber: 0.5, potassium: 50 }, summary: 'å¸æ»¿æ²¹çš„éºµç²‰ï¼Œå®Œå…¨çš„ç©ºç†±é‡ã€‚ä¸€æ ¹ç†±é‡æ¥è¿‘ 300 å¤§å¡ã€‚' },
            'pearl_milk_tea': { name: 'çç å¥¶èŒ¶ (å…¨ç³–)', engName: 'Bubble Milk Tea', icon: 'ğŸ§‹', category: 'é£²æ–™é¡', portionName: '1 æ¯ (700ml)', portionWeight: 700, base: { calories: 95, protein: 0.3, fat: 3.5, carbs: 15, fiber: 0, potassium: 20 }, summary: 'âš ï¸ ç†±é‡å† è»ã€‚ä¸€æ¯ç†±é‡å¯æŠµä¸€å€‹ä¾¿ç•¶ (ç´„ 665 å¤§å¡)ã€‚çç æ˜¯æ¾±ç²‰ï¼Œå¥¶ç²¾æ˜¯æ²¹ã€‚' },
            'chicken_cutlet': { name: 'ç‚¸é›æ’', engName: 'Fried Chicken Cutlet', icon: 'ğŸ”¥', category: 'å¤œå¸‚å°åƒ', portionName: '1 ç‰‡ (ç´„ 300g)', portionWeight: 300, base: { calories: 280, protein: 16, fat: 18, carbs: 14, fiber: 0.5, potassium: 180 }, summary: 'è£¹ç²‰å¸æ²¹ç‡æ¥µé«˜ã€‚ä¸€ç‰‡ç†±é‡å¾€å¾€è¶…é 800 å¤§å¡ã€‚' },
            'braised_pork_rice': { name: 'æ»·è‚‰é£¯', engName: 'Braised Pork Rice', icon: 'ğŸš', category: 'å¤œå¸‚å°åƒ', portionName: '1 ç¢— (ç´„ 250g)', portionWeight: 250, base: { calories: 200, protein: 7, fat: 10, carbs: 22, fiber: 0.5, potassium: 100 }, summary: 'è‚¥è‚‰æ¯”ä¾‹é«˜ï¼Œå»ºè­°æ­é…ç‡™é’èœå¹³è¡¡ã€‚' },
            'beef_noodle': { name: 'ç´…ç‡’ç‰›è‚‰éºµ', engName: 'Beef Noodle Soup', icon: 'ğŸœ', category: 'æ­£é¤', portionName: '1 ç¢— (ç´„ 700g)', portionWeight: 700, base: { calories: 110, protein: 6.5, fat: 5, carbs: 10, fiber: 1, potassium: 150 }, summary: 'ç´…ç‡’æ¹¯é ­éˆ‰å«é‡é«˜ã€‚é…¸èœä¹Ÿæ˜¯é«˜éˆ‰ä¾†æºã€‚æ•´ç¢—ç´„ 770 å¤§å¡ã€‚' },
            'stinky_tofu': { name: 'ç‚¸è‡­è±†è…', engName: 'Stinky Tofu', icon: 'ğŸ¥¬', category: 'å¤œå¸‚å°åƒ', portionName: '1 ä»½ (ç´„ 200g)', portionWeight: 200, base: { calories: 250, protein: 10, fat: 15, carbs: 20, fiber: 2, potassium: 150 }, summary: 'ç™¼é…µé£Ÿå“å«æœ‰ç›ŠèŒï¼Œä½†æ²¹ç‚¸æœƒç ´å£å¥½è™•ã€‚æ³¡èœæ˜¯å”¯ä¸€çš„çº–ç¶­ä¾†æºã€‚' },
            'oyster_omelet': { name: 'èšµä»”ç…', engName: 'Oyster Omelet', icon: 'ğŸ¦ª', category: 'å¤œå¸‚å°åƒ', portionName: '1 ä»½ (ç´„ 300g)', portionWeight: 300, base: { calories: 180, protein: 4, fat: 10, carbs: 18, fiber: 1, potassium: 120 }, summary: 'å¤ªç™½ç²‰å‹¾èŠ¡ç†±é‡é«˜ã€‚é†¬æ–™ä¹Ÿæ˜¯é«˜ç³–é«˜éˆ‰ã€‚ä¸€ä»½ç†±é‡ç´„ 540 å¤§å¡ã€‚' },
            'ba_wan': { name: 'è‚‰åœ“ (ç‚¸)', engName: 'Ba-wan', icon: 'ğŸ¥Ÿ', category: 'å¤œå¸‚å°åƒ', portionName: '1 é¡† (ç´„ 200g)', portionWeight: 200, base: { calories: 220, protein: 4, fat: 10, carbs: 28, fiber: 0.5, potassium: 80 }, summary: 'å¤–çš®æ˜¯åœ°ç“œç²‰æ²¹ç‚¸ï¼Œå¸æ²¹ç‡é«˜ã€‚' },
            'scallion_pancake': { name: 'è”¥æ²¹é¤…', engName: 'Scallion Pancake', icon: 'ğŸ¥', category: 'å¤œå¸‚å°åƒ', portionName: '1 å¼µ (ç´„ 150g)', portionWeight: 150, base: { calories: 350, protein: 6, fat: 18, carbs: 40, fiber: 1, potassium: 100 }, summary: 'éºµåœ˜æ··åˆæ²¹è„‚å±¤å±¤å †ç–Šï¼Œç†±é‡å¯†åº¦æ¥µé«˜ã€‚ä¸€ä»½ç´„ 525 å¤§å¡ã€‚' },
            'sausage': { name: 'çƒ¤é¦™è…¸', engName: 'Taiwanese Sausage', icon: 'ğŸŒ­', category: 'å¤œå¸‚å°åƒ', portionName: '1 æ ¹ (ç´„ 80g)', portionWeight: 80, base: { calories: 350, protein: 12, fat: 28, carbs: 10, fiber: 0, potassium: 200 }, summary: 'åŠ å·¥ç´…è‚‰ï¼Œå«æœ‰äºç¡é…¸é¹½ã€‚å»ºè­°æ­é…å¤§è’œé£Ÿç”¨ï¼Œå¯æŠ‘åˆ¶è‡´ç™Œç‰©ç”Ÿæˆã€‚' },
            'luwei': { name: 'æ»·å‘³æ‹¼ç›¤ (å«éºµ)', engName: 'Braised Dishes', icon: 'ğŸ¥˜', category: 'å¤œå¸‚å°åƒ', portionName: '1 ä»½ (ç´„ 400g)', portionWeight: 400, base: { calories: 150, protein: 10, fat: 8, carbs: 15, fiber: 3, potassium: 200 }, summary: 'ç›¸å°å¥åº·çš„å®µå¤œé¸æ“‡ï¼Œå‰ææ˜¯ã€Œä¸å–æ¹¯ã€ã€ã€Œå°‘é†¬æ–™ã€ã€ã€Œå¤šé»è”¬èœã€ã€‚' },
            'pig_blood_cake': { name: 'è±¬è¡€ç³•', engName: 'Pig Blood Cake', icon: 'â¬›', category: 'å¤œå¸‚å°åƒ', portionName: '1 æ”¯ (ç´„ 150g)', portionWeight: 150, base: { calories: 230, protein: 8, fat: 1, carbs: 48, fiber: 1, potassium: 50 }, summary: 'å…¶å¯¦æ˜¯ç³¯ç±³åšçš„ï¼Œå±¬æ–¼æ¾±ç²‰é¡ã€‚èŠ±ç”Ÿç²‰èˆ‡é¦™èœå¢åŠ äº†é¦™æ°£ä¹Ÿå¢åŠ äº†ç†±é‡ã€‚' },
            'popcorn_chicken': { name: 'é¹¹é…¥é›', engName: 'Popcorn Chicken', icon: 'ğŸ—', category: 'å¤œå¸‚å°åƒ', portionName: '1 ä»½ (ç´„ 200g)', portionWeight: 200, base: { calories: 300, protein: 18, fat: 20, carbs: 15, fiber: 0, potassium: 200 }, summary: 'ä¹å±¤å¡”å¸æ²¹ç‡æ¥µé«˜ï¼Œä¸è¦åƒè‘‰å­ã€‚ä¸€ä»½ç´„ 600 å¤§å¡ã€‚' },
            
            // === [F] é£²å“ (Beverages) ===
            'black_tea': { name: 'ç´…èŒ¶ (ç„¡ç³–)', engName: 'Black Tea', icon: 'â˜•', category: 'é£²æ–™é¡', portionName: '1 æ¯ (500ml)', portionWeight: 500, base: { calories: 0, protein: 0, fat: 0, carbs: 0, fiber: 0, potassium: 50 }, summary: 'å…¨ç™¼é…µèŒ¶ï¼Œæ€§è³ªæº«å’Œã€‚å«æœ‰èŒ¶é»ƒç´ ï¼Œå…·æŠ—æ°§åŒ–åŠ›ã€‚' },
            'green_tea': { name: 'ç¶ èŒ¶ (ç„¡ç³–)', engName: 'Green Tea', icon: 'ğŸµ', category: 'é£²æ–™é¡', portionName: '1 æ¯ (500ml)', portionWeight: 500, base: { calories: 0, protein: 0, fat: 0, carbs: 0, fiber: 0, potassium: 60 }, summary: 'å«æœ‰å…’èŒ¶ç´  (EGCG)ï¼Œæœ‰åŠ©æ–¼ç‡ƒç‡’è„‚è‚ªèˆ‡æå‡ä»£è¬ã€‚' },
            'latte': { name: 'æ‹¿éµå’–å•¡ (ç„¡ç³–)', engName: 'Latte', icon: 'â˜•', category: 'é£²æ–™é¡', portionName: '1 æ¯ (ä¸­æ¯ 360ml)', portionWeight: 360, base: { calories: 45, protein: 3, fat: 2.5, carbs: 3, fiber: 0, potassium: 150 }, summary: 'ç†±é‡ä¸»è¦ä¾†è‡ªç‰›å¥¶ã€‚ä¸€æ¯æ‹¿éµç´„å«æœ‰ 200ml ç‰›å¥¶ï¼Œèƒ½è£œå……éˆ£è³ªã€‚' },
            'americano': { name: 'ç¾å¼å’–å•¡', engName: 'Americano', icon: 'â˜•', category: 'é£²æ–™é¡', portionName: '1 æ¯ (ä¸­æ¯ 360ml)', portionWeight: 360, base: { calories: 2, protein: 0.1, fat: 0, carbs: 0.4, fiber: 0, potassium: 100 }, summary: 'å¹¾ä¹ç„¡ç†±é‡ã€‚å’–å•¡å› èƒ½æå‡å°ˆæ³¨åŠ›èˆ‡é‹å‹•è¡¨ç¾ã€‚' },
            'cola': { name: 'å¯æ¨‚', engName: 'Cola', icon: 'ğŸ¥¤', category: 'é£²æ–™é¡', portionName: '1 ç½ (330ml)', portionWeight: 330, base: { calories: 42, protein: 0, fat: 0, carbs: 10.6, fiber: 0, potassium: 0 }, summary: 'æ¶²é«”ç³–æ°´ã€‚ä¸€ç½å«æœ‰ç´„ 7 é¡†æ–¹ç³–ã€‚' },
            'beer': { name: 'å•¤é…’', engName: 'Beer', icon: 'ğŸº', category: 'é£²æ–™é¡', portionName: '1 ç½ (330ml)', portionWeight: 330, base: { calories: 43, protein: 0.5, fat: 0, carbs: 3.5, fiber: 0, potassium: 30 }, summary: 'ã€Œæ¶²é«”éºµåŒ…ã€ã€‚é…’ç²¾æ¯å…‹ 7 å¤§å¡ï¼Œä¸”æœƒæŠ‘åˆ¶è„‚è‚ªç‡ƒç‡’ã€‚' },
            'orange_juice': { name: 'æŸ³æ©™æ± (é®®æ¦¨)', engName: 'Orange Juice', icon: 'ğŸ¹', category: 'é£²æ–™é¡', portionName: '1 æ¯ (250ml)', portionWeight: 250, base: { calories: 45, protein: 0.7, fat: 0.2, carbs: 10, fiber: 0.2, potassium: 200 }, summary: 'çº–ç¶­å·²æµå¤±ï¼Œå‰©ä¸‹ç³–åˆ†ã€‚è¡€ç³–ä¸Šå‡é€Ÿåº¦æ¯”åƒæ°´æœå¿«å¾ˆå¤šã€‚' },

            // === [G] èª¿å‘³æ–™ (Condiments) ===
            'soy_sauce': { name: 'é†¬æ²¹', engName: 'Soy Sauce', icon: 'ğŸ¶', category: 'èª¿å‘³æ–™', portionName: '1 æ¹¯åŒ™ (15ml)', portionWeight: 15, base: { calories: 60, protein: 8, fat: 0, carbs: 8, fiber: 0, potassium: 300 }, summary: 'éˆ‰å«é‡é«˜ï¼Œé«˜è¡€å£“æ‚£è€…éœ€æ³¨æ„ã€‚' },
            'ketchup': { name: 'ç•ªèŒ„é†¬', engName: 'Ketchup', icon: 'ğŸ…', category: 'èª¿å‘³æ–™', portionName: '1 æ¹¯åŒ™ (15g)', portionWeight: 15, base: { calories: 100, protein: 1, fat: 0, carbs: 25, fiber: 0, potassium: 200 }, summary: 'è¨±å¤šå¸‚å”®ç•ªèŒ„é†¬æ·»åŠ å¤§é‡ç³–åˆ†ã€‚' },
            'mayonnaise': { name: 'ç¾ä¹ƒæ»‹', engName: 'Mayonnaise', icon: 'ğŸ¥š', category: 'èª¿å‘³æ–™', portionName: '1 æ¹¯åŒ™ (15g)', portionWeight: 15, base: { calories: 680, protein: 1, fat: 75, carbs: 1, fiber: 0, potassium: 20 }, summary: 'åŸºæœ¬ä¸Šå°±æ˜¯æ²¹èˆ‡è›‹é»ƒçš„æ··åˆç‰©ã€‚ç†±é‡æ¥µé«˜ã€‚' },
        };

        // ç‹€æ…‹ç®¡ç†
        let currentFoodKey = 'avocado';
        let currentMultiplier = 1;
        let radarChart = null;
        
        // --- 2. æ ¸å¿ƒåŠŸèƒ½å‡½æ•¸ ---

        document.addEventListener('DOMContentLoaded', () => {
            // Initialize Header and Footer
            const headerContainer = document.getElementById("header-component");
            if (headerContainer && window.DeusHeaderComponent) {
              new window.DeusHeaderComponent(headerContainer).setDebug(false);
            }
            const footerContainer = document.getElementById("footer-component");
            if (footerContainer && window.DeusFooterComponent) {
              new window.DeusFooterComponent(footerContainer).setDebug(false);
            }

            // åˆå§‹åŒ–åˆ†é¡æŒ‰éˆ•
            generateCategoryButtons();
            
            // ç¶å®šå¿«é€Ÿæ¨™ç±¤äº‹ä»¶
            document.querySelectorAll('.quick-search-btn').forEach(btn => {
                btn.addEventListener('click', handleQuickSearchClick);
            });
            
            // é è¨­æ¸²æŸ“ç¬¬ä¸€ç­†é£Ÿç‰©
            const defaultFoodKey = Object.keys(foodDatabase)[0];
            currentFoodKey = defaultFoodKey;
            renderFood(currentFoodKey);
            
            // ç¶å®šä»½é‡æŒ‰éˆ•äº‹ä»¶
            document.querySelectorAll('.portion-btn').forEach(btn => {
                btn.addEventListener('click', handlePortionClick);
            });

            // ç¶å®šæœå°‹æ¡†äº‹ä»¶
            const searchInput = document.getElementById('searchInput');
            const searchResults = document.getElementById('searchResults');
            
            searchInput.addEventListener('input', (e) => {
                handleSearch(e.target.value);
            });
            
            // é»æ“Šé é¢å…¶ä»–åœ°æ–¹æ™‚éš±è—æœå°‹çµæœ
            document.addEventListener('click', (e) => {
                // å¦‚æœé»æ“Šç›®æ¨™ä¸æ˜¯æœå°‹æ¡†ã€åˆ†é¡æŒ‰éˆ•æˆ–æœå°‹çµæœæœ¬èº«ï¼Œå‰‡é—œé–‰æœå°‹çµæœ
                if (!e.target.closest('#searchInput') && 
                    !e.target.closest('#categoryFilters') &&
                    !e.target.closest('#searchResults')) {
                    searchResults.classList.add('hidden');
                }
            });
        });

        // å‹•æ…‹ç”Ÿæˆåˆ†é¡æŒ‰éˆ•
        function generateCategoryButtons() {
            const container = document.getElementById('categoryFilters');
            const categories = [...new Set(Object.values(foodDatabase).map(item => item.category))];
            
            // Add 'All' button
            const allBtn = document.createElement('button');
            allBtn.className = 'px-3 py-1 rounded-full text-xs font-medium border border-green-500 bg-green-500 text-white transition shadow-sm';
            allBtn.innerText = 'å…¨éƒ¨';
            allBtn.addEventListener('click', () => {
                const allFoodKeys = Object.keys(foodDatabase);
                document.getElementById('foodDetail').classList.add('hidden');
                document.getElementById('categoryResultsContainer').classList.remove('hidden');
                renderCategoryResults(allFoodKeys);
                
                // Active state
                document.querySelectorAll('#categoryFilters button').forEach(b => b.classList.remove('bg-green-500', 'text-white'));
                allBtn.classList.add('bg-green-500', 'text-white');
            });
            container.appendChild(allBtn);

            categories.forEach(category => {
                const btn = document.createElement('button');
                btn.className = 'px-3 py-1 rounded-full text-xs font-medium border border-gray-300 bg-white text-gray-600 hover:bg-green-50 hover:text-green-700 hover:border-green-300 transition shadow-sm';
                btn.innerText = category;
                btn.addEventListener('click', (e) => {
                    filterByCategory(category);
                    
                    // Active state
                    document.querySelectorAll('#categoryFilters button').forEach(b => {
                        b.classList.remove('bg-green-500', 'text-white');
                        b.classList.add('bg-white', 'text-gray-600');
                    });
                    e.currentTarget.classList.add('bg-green-500', 'text-white');
                    e.currentTarget.classList.remove('bg-white', 'text-gray-600');
                });
                container.appendChild(btn);
            });
        }

        // ä¾åˆ†é¡ç¯©é¸åŠŸèƒ½
        function filterByCategory(category) {
            const searchInput = document.getElementById('searchInput');
            const foodDetail = document.getElementById('foodDetail');
            const categoryResultsContainer = document.getElementById('categoryResultsContainer');
            
            // æ¸…ç©ºæœå°‹æ¡†ï¼Œè®“ä½¿ç”¨è€…çŸ¥é“ç¾åœ¨æ˜¯åˆ†é¡ç€è¦½æ¨¡å¼
            searchInput.value = '';
            searchInput.placeholder = `æ­£åœ¨ç€è¦½ï¼š${category}`;

            // ç¯©é¸ç¬¦åˆè©²åˆ†é¡çš„é£Ÿç‰©
            const results = Object.keys(foodDatabase).filter(key => {
                return foodDatabase[key].category === category;
            });

            // éš±è—é£Ÿç‰©è©³æƒ…ï¼Œé¡¯ç¤ºåˆ†é¡çµæœ
            foodDetail.classList.add('hidden');
            categoryResultsContainer.classList.remove('hidden');

            renderCategoryResults(results);
        }

        // NEW: æ¸²æŸ“åˆ†é¡çµæœåˆ°ä¸»å…§å®¹å€
        function renderCategoryResults(results) {
            const container = document.getElementById('categoryResultsContainer');
            container.innerHTML = ''; // æ¸…ç©ºèˆŠçµæœ

            if (results.length > 0) {
                results.forEach(key => {
                    const food = foodDatabase[key];
                    const card = document.createElement('div');
                    card.className = 'cursor-pointer bg-white p-4 rounded-lg shadow-md hover:shadow-xl hover:transform hover:-translate-y-1 transition-all';
                    
                    card.innerHTML = `
                        <div class="w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center text-3xl mx-auto mb-3">${food.icon}</div>
                        <div class="text-center">
                            <div class="font-bold text-gray-800">${food.name}</div>
                            <div class="text-xs text-gray-500">${food.category}</div>
                        </div>
                    `;
                    
                    card.addEventListener('click', () => {
                        selectFood(key);
                        // åˆ‡æ›å›è©³æƒ…è¦–åœ–
                        document.getElementById('foodDetail').classList.remove('hidden');
                        container.classList.add('hidden');
                    });
                    container.appendChild(card);
                });
            } else {
                container.innerHTML = `<p class="text-center text-gray-500 col-span-full">æ­¤åˆ†é¡ä¸‹æ²’æœ‰é£Ÿç‰©ã€‚</p>`;
            }
        }

        function handlePortionClick(e) {
            document.querySelectorAll('.portion-btn').forEach(b => {
                b.classList.remove('bg-white', 'text-green-700', 'shadow-sm');
                b.classList.add('text-gray-500');
            });
            e.target.classList.remove('text-gray-500');
            e.target.classList.add('bg-white', 'text-green-700', 'shadow-sm');
            
            currentMultiplier = parseFloat(e.target.dataset.mult);
            updateNumbers();
        }

        function handleQuickSearchClick(e) {
            const key = e.currentTarget.dataset.food;
            selectFood(key);
             // ç¢ºä¿è¦–åœ–æ­£ç¢º
            document.getElementById('foodDetail').classList.remove('hidden');
            document.getElementById('categoryResultsContainer').classList.add('hidden');
        }

        function handleSearch(query) {
            const searchResults = document.getElementById('searchResults');
            const foodDetail = document.getElementById('foodDetail');
            const categoryResultsContainer = document.getElementById('categoryResultsContainer');

            // ç•¶ä½¿ç”¨è€…é–‹å§‹æœå°‹æ™‚ï¼Œç¢ºä¿é¡¯ç¤ºé£Ÿç‰©è©³æƒ…ï¼Œéš±è—åˆ†é¡çµæœ
            foodDetail.classList.remove('hidden');
            categoryResultsContainer.classList.add('hidden');

            if (query.trim() === '') {
                searchResults.classList.add('hidden');
                return;
            }

            const results = Object.keys(foodDatabase).filter(key => {
                const food = foodDatabase[key];
                const name = food.name.toLowerCase();
                const engName = food.engName.toLowerCase();
                const q = query.toLowerCase();
                // æ”¯æ´åŒç¾©è©æˆ–ç°¡å–®æ¨¡ç³Šæœå°‹
                return name.includes(q) || engName.includes(q) || key.includes(q);
            });

            renderSearchResults(results, null);
        }

        // çµ±ä¸€æ¸²æŸ“æœå°‹çµæœåˆ—è¡¨
        function renderSearchResults(results, title) {
            const searchResults = document.getElementById('searchResults');
            searchResults.innerHTML = ''; 

            if (title) {
                const titleEl = document.createElement('div');
                titleEl.className = 'px-4 py-2 bg-gray-50 text-xs font-bold text-gray-500 uppercase tracking-wider sticky top-0';
                titleEl.innerText = title;
                searchResults.appendChild(titleEl);
            }

            if (results.length > 0) {
                results.forEach(key => {
                    const food = foodDatabase[key];
                    const item = document.createElement('a');
                    item.href = '#';
                    item.className = 'flex items-center px-4 py-3 hover:bg-green-50 transition text-sm border-b border-gray-50 last:border-0';
                    
                    // å„ªåŒ–åˆ—è¡¨é¡¯ç¤º
                    item.innerHTML = `
                        <div class="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-lg mr-3">${food.icon}</div>
                        <div>
                            <div class="font-medium text-gray-800">${food.name}</div>
                            <div class="text-xs text-gray-400">${food.engName}</div>
                        </div>
                    `;
                    
                    item.addEventListener('click', (e) => {
                        e.preventDefault();
                        selectFood(key);
                    });
                    searchResults.appendChild(item);
                });
                searchResults.classList.remove('hidden');
            } else {
                const noResult = document.createElement('div');
                noResult.className = 'px-4 py-8 text-center text-gray-400 text-sm';
                noResult.innerHTML = '<i class="fa-regular fa-face-frown text-xl mb-2 block"></i> æ‰¾ä¸åˆ°ç›¸é—œé£Ÿç‰©';
                searchResults.appendChild(noResult);
                searchResults.classList.remove('hidden');
            }
        }

        function selectFood(key) {
            currentFoodKey = key;
            resetPortionUI();
            renderFood(key);
            
            // æ›´æ–° UI ç‹€æ…‹
            const searchInput = document.getElementById('searchInput');
            const searchResults = document.getElementById('searchResults');
            
            // ç¢ºä¿è©³æƒ…é é¡¯ç¤º
            document.getElementById('foodDetail').classList.remove('hidden');
            document.getElementById('categoryResultsContainer').classList.add('hidden');
            
            searchInput.value = foodDatabase[key].name; // å°‡é¸ä¸­çš„é£Ÿç‰©å¡«å…¥æœå°‹æ¡†
            searchInput.placeholder = "è©¦è©¦çœ‹ï¼šé…ªæ¢¨ã€é›èƒ¸è‚‰ã€é®­é­š..."; // é‡ç½® placeholder
            searchResults.classList.add('hidden');
        }

        function resetPortionUI() {
            currentMultiplier = 1;
            const btn100 = document.getElementById('btn-100g');
            btn100.click(); 
        }

        // æ¸²æŸ“é é¢ä¸»è¦æ•¸æ“š
        function renderFood(key) {
            const data = foodDatabase[key];
            if(!data) return;

            document.getElementById('foodName').innerText = `${data.name} (${data.engName})`;
            document.getElementById('foodIcon').innerText = data.icon;
            document.getElementById('foodCategory').innerText = data.category;
            document.getElementById('ai-summary').innerText = data.summary;
            document.getElementById('btn-serving').innerText = data.portionName;
            
            const servingMult = data.portionWeight / 100;
            document.getElementById('btn-serving').dataset.mult = servingMult;

            updateNumbers();
            updateChart(data);
        }

        // æ›´æ–°æ•¸å€¼èˆ‡é€²åº¦æ¢
        function updateNumbers() {
            const data = foodDatabase[currentFoodKey].base;
            const m = currentMultiplier; 

            const fmt = (num) => (num * m).toFixed(1).replace('.0', '');

            document.getElementById('caloriesDisplay').innerHTML = `${Math.round(data.calories * m)} <span class="text-base font-normal text-gray-500">kcal</span>`;
            document.getElementById('val-protein').innerText = `${fmt(data.protein)}g`;
            document.getElementById('val-fat').innerText = `${fmt(data.fat)}g`;
            document.getElementById('val-carbs').innerText = `${fmt(data.carbs)}g`;
            document.getElementById('val-k').innerText = `${Math.round(data.potassium * m)}mg`;
            document.getElementById('val-fiber').innerText = `${fmt(data.fiber)}g`;

            const pPct = Math.min((data.protein * m / 60) * 100, 100);
            const fPct = Math.min((data.fat * m / 60) * 100, 100);
            const cPct = Math.min((data.carbs * m / 300) * 100, 100);

            document.getElementById('bar-protein').style.width = `${pPct}%`;
            document.getElementById('bar-fat').style.width = `${fPct}%`;
            document.getElementById('bar-carbs').style.width = `${cPct}%`;
        }

        // Chart.js åœ–è¡¨è¨­å®š
        function updateChart(data) {
            const ctx = document.getElementById('nutritionRadar').getContext('2d');
            
            if(radarChart) radarChart.destroy();

            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['è›‹ç™½è³ª', 'è„‚è‚ª', 'ç¢³æ°´', 'çº–ç¶­', 'é‰€'],
                    datasets: [{
                        label: 'ç‡Ÿé¤Šç´ ä½”æ¯” (ç›¸å°æ–¼é«˜æ¨™)',
                        data: [
                            (data.base.protein / 30) * 100, 
                            (data.base.fat / 20) * 100, 
                            (data.base.carbs / 50) * 100,
                            (data.base.fiber / 10) * 100,
                            (data.base.potassium / 500) * 100
                        ],
                        backgroundColor: 'rgba(34, 197, 94, 0.2)',
                        borderColor: 'rgba(34, 197, 94, 1)',
                        pointBackgroundColor: 'rgba(34, 197, 94, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { display: false },
                            grid: { color: '#e5e7eb' },
                            pointLabels: {
                                font: {
                                    family: "'Noto Sans TC', sans-serif",
                                    size: 11
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    },
                    animation: {
                        duration: 1000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }
    </script>