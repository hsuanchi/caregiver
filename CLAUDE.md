# åŸç”Ÿ JavaScript å‰ç«¯å‡½å¼åº«é–‹ç™¼è¦ç¯„æŒ‡å—

## æ ¸å¿ƒç†å¿µï¼šé›¶å»ºç½®ã€ç›´æ¥å¯ç”¨

**æœ¬è¦ç¯„çš„æ ¸å¿ƒåŸå‰‡æ˜¯å»ºç«‹å®Œå…¨ç„¡éœ€å»ºç½®éç¨‹çš„ JavaScript å‡½å¼åº«**

- âœ… **å¯«å®Œå³å¯ç”¨**ï¼šç¨‹å¼ç¢¼å¯«å®Œç›´æ¥å°±æ˜¯å¯éƒ¨ç½²çš„æœ€çµ‚ç‰ˆæœ¬
- âœ… **é›¶å·¥å…·ç›¸ä¾**ï¼šä¸éœ€è¦ Node.jsã€npmã€webpackã€babel ç­‰ä»»ä½•å·¥å…·
- âœ… **æ‹·è²å³éƒ¨ç½²**ï¼šç›´æ¥å°‡æª”æ¡ˆè¤‡è£½åˆ°ä¼ºæœå™¨å°±èƒ½é‹ä½œ
- âœ… **åŸç”Ÿç›¸å®¹**ï¼šä½¿ç”¨ç´”åŸç”Ÿ JavaScriptï¼Œæ”¯æ´ 2022 å¹´ä»¥ä¾†çš„ç€è¦½å™¨
- âŒ **çµ•ä¸ä½¿ç”¨**ï¼šä»»ä½•éœ€è¦ç·¨è­¯ã€è½‰è­¯ã€æ‰“åŒ…çš„èªæ³•æˆ–å·¥å…·

## ç¨‹å¼ç¢¼é¢¨æ ¼

- é€™æ˜¯ä¸€å€‹ç´”åŸç”Ÿ JavaScript å‰ç«¯å°ˆæ¡ˆï¼Œæ‰€æœ‰ç¨‹å¼ç¢¼éƒ½æ‡‰è©²ç”¨åŸç”Ÿ JavaScript æ’°å¯«
- **çµ•å°ä¸ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹ JavaScript å‡½å¼åº«æˆ–æ¡†æ¶**ï¼ŒåŒ…æ‹¬ jQueryã€Reactã€Vue ç­‰
- **ä¸ä½¿ç”¨ ES Modules (import/export)**ï¼Œä¸€å¾‹ä½¿ç”¨å‚³çµ±çš„ JavaScript è¼‰å…¥æ–¹å¼
- **æ‰€æœ‰ JavaScript æª”æ¡ˆéƒ½å¿…é ˆå¯ä»¥ç›´æ¥è¼‰å…¥ä½¿ç”¨ï¼Œçµ•å°ä¸éœ€è¦ä»»ä½• buildã€compileã€transpile ç­‰é è™•ç†ç¨‹åº**
- **æ‰€æœ‰åŠŸèƒ½éƒ½å¿…é ˆç”¨ JavaScript class å°è£**ï¼Œç¢ºä¿ç¨‹å¼ç¢¼çµ„ç¹”æ¸…æ™°
- Claude åœ¨ç”¢ç”Ÿç¨‹å¼ç¢¼æ™‚ä¸€å¾‹è¦ç›¸å®¹æ–¼**2022å¹´ä»¥ä¾†çš„ç€è¦½å™¨ç‰ˆæœ¬**
- Claude åœ¨è™•ç† URL åƒæ•¸æ™‚ä¸€å¾‹ä½¿ç”¨ `?foo=bar&baz=qux` æ ¼å¼
- **Claude åœ¨æ‰€æœ‰åŸ·è¡Œéç¨‹ä¸­éƒ½è¦æœ‰å®Œæ•´çš„ console æ—¥èªŒè¼¸å‡ºï¼ŒåŒ…å«ä½†ä¸é™æ–¼ï¼šåŸ·è¡Œé–‹å§‹ã€è™•ç†æ­¥é©Ÿã€éŒ¯èª¤è¨Šæ¯ã€è­¦å‘Šã€æˆåŠŸè¨Šæ¯ã€åŸ·è¡ŒçµæŸ**
- **Claude å¿…é ˆåœ¨æ¯æ¬¡æä¾›ç¨‹å¼ç¢¼æ™‚ï¼Œéƒ½è¦é™„ä¸Šä½¿ç”¨ç¯„ä¾‹å’Œèªªæ˜**ï¼Œå±•ç¤ºå¦‚ä½•å¯¦éš›é‹ç”¨è©²ç¨‹å¼ç¢¼
- **ç¸½æ˜¯ä½¿ç”¨é«˜åº¦èªç¾©åŒ–å’Œæè¿°æ€§çš„é¡åˆ¥ã€æ–¹æ³•å’Œåƒæ•¸åç¨±ï¼Œå³ä½¿å¯èƒ½æœƒæ¯”è¼ƒå†—é•·**
- **æ‰€æœ‰æ¸¬è©¦æª”æ¡ˆéƒ½è¦ä¾ç…§ tests ç›®éŒ„ä¸­çš„æ¨¡å¼æ’°å¯«ï¼Œæª”æ¡ˆåç¨±çµ±ä¸€ç‚º `test-{module-name}-comprehensive-executor.js`**
- **Claude åœ¨æ’°å¯«æ¸¬è©¦æª”æ¡ˆå’Œç¯„ä¾‹ç¨‹å¼ç¢¼æ™‚ï¼Œä¸€å¾‹è¦ä¾ç…§ JavaScript æ¸¬è©¦æ¨¡çµ„çš„æ¨¡å¼å’Œæ¶æ§‹**
- **Claude åœ¨ç”¢ç”Ÿæ¸¬è©¦å’Œä½¿ç”¨ç¯„ä¾‹æ™‚ï¼Œä¸€å¾‹è¦ä½¿ç”¨å…·é«”çš„ module åç¨±ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é€šç”¨çš„ä½”ä½ç¬¦**
- **æ‰€æœ‰å¿…è¦å’Œå¯é¸çš„åƒæ•¸åŠè¨­å®šéƒ½å¿…é ˆä½¿ç”¨ getter å’Œ setter æ–¹æ³•ï¼Œä¸¦æ¡ç”¨å¯ä¸²æ¥çš„ chainable æ¨¡å¼**
- **æ‰€æœ‰ setter æ–¹æ³•éƒ½è¦å›å‚³ this ä»¥æ”¯æ´éˆå¼å‘¼å«**
- **æ‰€æœ‰ getter æ–¹æ³•éƒ½è¦å›å‚³å°æ‡‰çš„å€¼**
- **é—œéµéœ€æ±‚ï¼šæ‰€æœ‰ CSS å’Œ JavaScript éƒ½å¿…é ˆå°è£åœ¨ Shadow DOM ä¸­ä»¥å¯¦ç¾å®Œå…¨éš”é›¢**
- **Shadow DOM å°è£ï¼šç¢ºä¿æ¨£å¼å’Œè…³æœ¬ä¸æœƒèˆ‡å¤–éƒ¨é é¢ç”¢ç”Ÿè¡çªæˆ–æ´©æ¼**
- **åš´æ ¼ç¦æ­¢ï¼šé¿å…å°‡ CSS æ³¨å…¥åˆ°ä¸»é é¢ä¸­**
- **debug åƒæ•¸å¿…é ˆéµå¾ª getter/setter + chainable æ¨¡å¼ï¼š`.setDebug(true).getDebug()`**
- **ç•¶ debug ç‚º false æ™‚ï¼Œä¸å¾—åœ¨ console è¼¸å‡ºä»»ä½•é™¤éŒ¯è¨Šæ¯**
- **Claude ä¸€å¾‹è¦æ’°å¯« README.md æª”æ¡ˆä¾†å±•ç¤ºæ¨¡çµ„çš„ã€Œå¦‚ä½•ä½¿ç”¨ã€ç¯„ä¾‹**
- **Claude è¦å»ºç«‹ä¸€å€‹é›†ä¸­å¼çš„è¨­å®šç®¡ç†æ©Ÿåˆ¶ï¼Œç”¨ä¾†è¨­å®šæ‰€æœ‰å¿…è¦å’Œå¯é¸çš„è¨­å®šåƒæ•¸ï¼Œé¿å…åˆ†æ•£åœ¨å„å€‹é¡åˆ¥ä¸­**

- **Claude åœ¨æ’°å¯«æ‰€æœ‰è…³æœ¬å’Œæœå‹™æ™‚ï¼Œä¸€å¾‹è¦å¯¦ä½œå®Œæ•´çš„ console æ—¥èªŒè¼¸å‡ºæ©Ÿåˆ¶ï¼š**
  ## Shadow DOM å°è£è¦æ±‚

**æ‰€æœ‰ JavaScript å‡½å¼åº«éƒ½å¿…é ˆä½¿ç”¨ Shadow DOM ä¾†å°è£ CSS å’Œ JavaScriptï¼Œç¢ºä¿å®Œå…¨éš”é›¢**

### ğŸ”’ **Shadow DOM å°è£åŸå‰‡**

- **å®Œå…¨éš”é›¢**ï¼šæ‰€æœ‰æ¨£å¼å’Œè…³æœ¬éƒ½å¿…é ˆå°è£åœ¨ Shadow DOM å…§
- **ç„¡å¤–éƒ¨å½±éŸ¿**ï¼šShadow DOM å…§çš„æ¨£å¼ä¸æœƒå½±éŸ¿å¤–éƒ¨é é¢
- **ç„¡å¤–éƒ¨å¹²æ“¾**ï¼šå¤–éƒ¨é é¢çš„æ¨£å¼ä¸æœƒå½±éŸ¿ Shadow DOM å…§å®¹
- **åš´æ ¼ç¦æ­¢ CSS æ³¨å…¥**ï¼šçµ•å°ä¸å…è¨±å°‡ CSS æ³¨å…¥åˆ°ä¸»é é¢çš„ `<head>` æˆ–ä»»ä½•å¤–éƒ¨å…ƒç´ 
- **å…¨åŸŸå‘½åç©ºé–“ä¿è­·**ï¼šé¿å…è®Šæ•¸å’Œå‡½æ•¸åç¨±è¡çª

### âŒ **ç¦æ­¢çš„åšæ³•**

```javascript
// ğŸš« çµ•å°ä¸è¦é€™æ¨£åš - ä¸å¯å°‡ CSS æ³¨å…¥ä¸»é é¢
document.head.insertAdjacentHTML('beforeend', '<style>...</style>');
document.head.appendChild(styleElement);
document.styleSheets[0].insertRule('...');

// ğŸš« ä¸å¯åœ¨ä¸»é é¢æ’°å¯« style æ¨™ç±¤
const style = document.createElement('style');
document.head.appendChild(style);

// ğŸš« ä¸å¯ä¿®æ”¹ä¸»é é¢çš„ç¾æœ‰æ¨£å¼
document.documentElement.style.setProperty('--custom-color', 'red');
```

### âœ… **æ­£ç¢ºçš„åšæ³•**

```javascript
// âœ… æ­£ç¢º - æ‰€æœ‰ CSS éƒ½åœ¨ Shadow DOM å…§
createStyles()
{
    const style = document.createElement('style');
    style.textContent = `
        /* æ‰€æœ‰æ¨£å¼éƒ½åœ¨ Shadow DOM å…§ï¼Œå®Œå…¨éš”é›¢ */
        :host { display: block; }
        .component { background: #fff; }
    `;
    this.shadowRoot.appendChild(style); // åªæ·»åŠ åˆ° Shadow DOM
}
```

### ğŸ“¦ **Shadow DOM å¯¦ä½œæ¨¡å¼**

```javascript
// Shadow DOM å°è£æ¨¡å¼
(function (global) {
    'use strict';

    class DeusComponentWithShadowDOM {
        constructor(hostElement) {
            // å»ºç«‹ Shadow DOM
            this.hostElement = hostElement || document.body;
            this.shadowRoot = this.hostElement.attachShadow({mode: 'closed'});

            // åˆå§‹åŒ–è¨­å®š
            this._config = {
                debug: false,
                theme: 'default'
            };

            // åˆå§‹åŒ–çµ„ä»¶
            this.initialize();
        }

        initialize() {
            this.createStyles();
            this.createContent();
            this.attachEvents();
        }

        // å»ºç«‹ Shadow DOM å…§çš„æ¨£å¼
        createStyles() {
            const style = document.createElement('style');
            style.textContent = `
                /* æ‰€æœ‰æ¨£å¼éƒ½åœ¨ Shadow DOM å…§ï¼Œå®Œå…¨éš”é›¢ */
                :host {
                    display: block;
                    contain: layout style paint;
                }
                
                .component-container {
                    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
                    background: #ffffff;
                    border: 1px solid #e1e5e9;
                    border-radius: 8px;
                    padding: 16px;
                    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                }
                
                .component-header {
                    font-size: 18px;
                    font-weight: 600;
                    margin-bottom: 12px;
                    color: #1f2937;
                }
                
                .component-content {
                    color: #4b5563;
                    line-height: 1.5;
                }
                
                .debug-info {
                    margin-top: 12px;
                    padding: 8px;
                    background: #f3f4f6;
                    border-radius: 4px;
                    font-family: monospace;
                    font-size: 12px;
                    color: #6b7280;
                    display: none;
                }
                
                .debug-info.visible {
                    display: block;
                }
                
                /* ä¸»é¡Œæ¨£å¼ */
                :host([theme="dark"]) .component-container {
                    background: #1f2937;
                    border-color: #374151;
                    color: #f9fafb;
                }
                
                :host([theme="dark"]) .component-header {
                    color: #f9fafb;
                }
                
                :host([theme="dark"]) .component-content {
                    color: #d1d5db;
                }
            `;
            this.shadowRoot.appendChild(style);
        }

        // å»ºç«‹ Shadow DOM å…§çš„å…§å®¹
        createContent() {
            const container = document.createElement('div');
            container.className = 'component-container';

            const header = document.createElement('div');
            header.className = 'component-header';
            header.textContent = 'Shadow DOM å°è£çµ„ä»¶';

            const content = document.createElement('div');
            content.className = 'component-content';
            content.textContent = 'é€™å€‹çµ„ä»¶å®Œå…¨å°è£åœ¨ Shadow DOM ä¸­ï¼Œèˆ‡å¤–éƒ¨é é¢å®Œå…¨éš”é›¢';

            const debugInfo = document.createElement('div');
            debugInfo.className = 'debug-info';
            debugInfo.textContent = 'Debug: Shadow DOM éš”é›¢æ­£å¸¸é‹ä½œ';

            container.appendChild(header);
            container.appendChild(content);
            container.appendChild(debugInfo);

            this.shadowRoot.appendChild(container);

            // å„²å­˜å¼•ç”¨ä»¥ä¾¿å¾ŒçºŒæ“ä½œ
            this.elements = {
                container,
                header,
                content,
                debugInfo
            };
        }

        // Shadow DOM å…§çš„äº‹ä»¶è™•ç†
        attachEvents() {
            // äº‹ä»¶ä¹Ÿå®Œå…¨å°è£åœ¨ Shadow DOM å…§
            this.elements.container.addEventListener('click', (e) => {
                if (this.getDebug()) {
                    console.log('ğŸ” Shadow DOM çµ„ä»¶è¢«é»æ“Š');
                }
            });
        }

        // Getter/Setter æ–¹æ³•ï¼ˆç¶­æŒ chainable æ¨¡å¼ï¼‰
        getDebug() {
            return this._config.debug;
        }

        setDebug(debug) {
            this._config.debug = Boolean(debug);

            // æ›´æ–° Shadow DOM å…§çš„ debug é¡¯ç¤º
            if (this.elements.debugInfo) {
                this.elements.debugInfo.classList.toggle('visible', this._config.debug);
            }

            return this; // æ”¯æ´éˆå¼å‘¼å«
        }

        getTheme() {
            return this._config.theme;
        }

        setTheme(theme) {
            this._config.theme = theme;

            // æ›´æ–° host å…ƒç´ çš„ theme å±¬æ€§
            this.hostElement.setAttribute('theme', theme);

            return this;
        }

        // æ‰¹æ¬¡è¨­å®š
        setConfig(config) {
            Object.keys(config).forEach(key => {
                const setterName = 'set' + key.charAt(0).toUpperCase() + key.slice(1);
                if (typeof this[setterName] === 'function') {
                    this[setterName](config[key]);
                }
            });
            return this;
        }

        getConfig() {
            return Object.assign({}, this._config);
        }

        // æ›´æ–°å…§å®¹ï¼ˆåƒ…å½±éŸ¿ Shadow DOM å…§éƒ¨ï¼‰
        setContent(content) {
            if (this.elements.content) {
                this.elements.content.textContent = content;
            }
            return this;
        }

        setHeader(header) {
            if (this.elements.header) {
                this.elements.header.textContent = header;
            }
            return this;
        }

        // éŠ·æ¯€çµ„ä»¶
        destroy() {
            if (this.shadowRoot) {
                this.shadowRoot.innerHTML = '';
            }
        }
    }

    // å°‡é¡åˆ¥æ›è¼‰åˆ°å…¨åŸŸç‰©ä»¶
    global.DeusComponentWithShadowDOM = DeusComponentWithShadowDOM;

})(window);

// ä½¿ç”¨ç¯„ä¾‹
const hostElement = document.createElement('div');
document.body.appendChild(hostElement);

const component = new DeusComponentWithShadowDOM(hostElement)
    .setTheme('dark')
    .setDebug(true)
    .setHeader('æˆ‘çš„ Shadow DOM çµ„ä»¶')
    .setContent('å®Œå…¨éš”é›¢çš„å…§å®¹ï¼Œä¸æœƒå—åˆ°å¤–éƒ¨æ¨£å¼å½±éŸ¿');
```

### ğŸ”§ **Shadow DOM å»ºç«‹è¦æ±‚**

1. **ä½¿ç”¨ Closed Shadow DOM**ï¼š
   ```javascript
   this.shadowRoot = element.attachShadow({ mode: 'closed' });
   ```

2. **æ¨£å¼å°è£**ï¼š
    - æ‰€æœ‰ CSS éƒ½å¿…é ˆåœ¨ Shadow DOM å…§å®šç¾©
    - ä½¿ç”¨ `:host` é¸æ“‡å™¨å®šç¾©å®¹å™¨æ¨£å¼
    - ä½¿ç”¨ `:host([attribute])` å¯¦ç¾ä¸»é¡Œåˆ‡æ›

3. **äº‹ä»¶éš”é›¢**ï¼š
    - æ‰€æœ‰äº‹ä»¶ç›£è½å™¨éƒ½åœ¨ Shadow DOM å…§è¨»å†Š
    - é¿å…äº‹ä»¶å†’æ³¡åˆ°å¤–éƒ¨é é¢

4. **è®Šæ•¸éš”é›¢**ï¼š
    - ä½¿ç”¨ IIFE å°è£æ‰€æœ‰ JavaScript ç¨‹å¼ç¢¼
    - é¿å…å…¨åŸŸè®Šæ•¸æ±¡æŸ“

### ğŸ“‹ **Shadow DOM æª¢æŸ¥æ¸…å–®**

- [ ] å»ºç«‹ Closed Shadow DOM
- [ ] æ‰€æœ‰ CSS éƒ½åœ¨ Shadow DOM å…§å®šç¾©
- [ ] **çµ•å°ä¸å°‡ CSS æ³¨å…¥åˆ°ä¸»é é¢çš„ `<head>` æˆ–ä»»ä½•å¤–éƒ¨å…ƒç´ **
- [ ] ä½¿ç”¨ `:host` é¸æ“‡å™¨
- [ ] äº‹ä»¶è™•ç†å™¨åœ¨ Shadow DOM å…§è¨»å†Š
- [ ] æ”¯æ´ä¸»é¡Œåˆ‡æ›ï¼ˆ:host([theme="xxx"])ï¼‰
- [ ] ç¶­æŒ getter/setter + chainable API
- [ ] åŒ…å« debug åƒæ•¸æ§åˆ¶
- [ ] æä¾› destroy æ–¹æ³•æ¸…ç†è³‡æº
- [ ] **é©—è­‰ç„¡ä»»ä½• CSS æ´©æ¼åˆ°ä¸»é é¢**

### ğŸ¯ **Shadow DOM ä½¿ç”¨ç¯„ä¾‹**

```javascript
// å»ºç«‹å¤šå€‹å®Œå…¨éš”é›¢çš„çµ„ä»¶å¯¦ä¾‹
const component1 = new DeusComponentWithShadowDOM(document.getElementById('container1'))
    .setTheme('light')
    .setDebug(false);

const component2 = new DeusComponentWithShadowDOM(document.getElementById('container2'))
    .setTheme('dark')
    .setDebug(true);

// å…©å€‹çµ„ä»¶å®Œå…¨ç¨ç«‹ï¼Œæ¨£å¼å’Œè¡Œç‚ºä¸æœƒäº’ç›¸å½±éŸ¿
```

### ğŸ“Š **Console æ—¥èªŒè¼¸å‡ºæ©Ÿåˆ¶**

```javascript
  class DeusLogger {
    constructor(debugMode = false) {
        this.debugMode = debugMode;
    }

    setDebugMode(enabled) {
        this.debugMode = Boolean(enabled);
        return this;
    }

    log(level, message) {
        // é—œéµï¼šåªåœ¨ debug æ¨¡å¼æˆ–é debug ç­‰ç´šæ™‚è¼¸å‡º
        if (!this.debugMode && level === 'debug') {
            return; // ä¸è¼¸å‡º debug è¨Šæ¯
        }

        const timestamp = new Date().toLocaleTimeString();
        const logMessage = timestamp + ' - ' + level.toUpperCase() + ': ' + message;
        console[level](logMessage);
    }

    info(message) {
        this.log('info', 'ğŸ“‹ ' + message);
    }

    warn(message) {
        this.log('warn', 'âš ï¸ ' + message);
    }

    error(message) {
        this.log('error', 'âŒ ' + message);
    }

    success(message) {
        this.log('info', 'âœ… ' + message);
    }

    debug(message) {
        if (this.debugMode) {
            this.log('debug', 'ğŸ” ' + message);
        }
    }
}
```

- **æ‰€æœ‰é‡è¦çš„åŸ·è¡Œæ­¥é©Ÿéƒ½è¦æœ‰å°æ‡‰çš„æ—¥èªŒè¼¸å‡ºï¼ŒåŒ…å«ï¼š**
    - ğŸ“‹ è¨­å®šè¼‰å…¥å’Œé©—è­‰
    - ğŸ”— å¤–éƒ¨æœå‹™é€£ç·šç‹€æ…‹
    - ğŸ“Š è³‡æ–™è™•ç†é€²åº¦
    - â±ï¸ æ•ˆèƒ½çµ±è¨ˆè³‡è¨Š
    - ğŸ” é™¤éŒ¯è³‡è¨Šï¼ˆdebug æ¨¡å¼ï¼‰
    - âš ï¸ è­¦å‘Šè¨Šæ¯
    - âŒ éŒ¯èª¤è™•ç†
    - âœ… æˆåŠŸè¨Šæ¯
    - ğŸ“ˆ åŸ·è¡Œçµæœçµ±è¨ˆ

## JavaScript ç¨‹å¼ç¢¼çµæ§‹æœ€ä½³å¯¦å‹™

- **ä½¿ç”¨ç¾ä»£ ES6+ èªæ³•**ï¼Œç¢ºä¿åœ¨ç¾ä»£ç€è¦½å™¨ä¸­æ­£å¸¸é‹ä½œ
- **æ‰€æœ‰æª”æ¡ˆéƒ½è¦ä½¿ç”¨ `.js` å‰¯æª”å**
- **æ‰€æœ‰ JavaScript æª”æ¡ˆéƒ½æ˜¯æœ€çµ‚ç”¢å“ï¼Œé–‹ç™¼å³å®Œæˆï¼Œç„¡éœ€ä»»ä½•å¾Œè£½è™•ç†**
- **ä½¿ç”¨ JavaScript class èªæ³•**çµ„ç¹”ç¨‹å¼ç¢¼ï¼Œåˆ©ç”¨ç¾ä»£ç€è¦½å™¨çš„åŸç”Ÿæ”¯æ´
- **ä½¿ç”¨ IIFE (Immediately Invoked Function Expression)** é¿å…å…¨åŸŸå‘½åç©ºé–“æ±¡æŸ“
- **å¯ä»¥ä½¿ç”¨ç¾ä»£ JavaScript åŠŸèƒ½**ï¼šPromiseã€fetchã€async/awaitã€arrow functions ç­‰
- **ä½¿ç”¨åŸç”Ÿ DOM API** é€²è¡Œ DOM æ“ä½œ
- **æ¯å€‹ .js æª”æ¡ˆéƒ½å¯ä»¥ç›´æ¥ç”¨ `<script src="æª”æ¡ˆè·¯å¾‘"></script>` è¼‰å…¥ä½¿ç”¨**
- **ç°¡å–®çš„æª”æ¡ˆçµ„ç¹”**ï¼šé–‹ç™¼è€…å¯ä»¥æ ¹æ“šéœ€æ±‚è‡ªç”±çµ„ç¹”ç¨ç«‹ JS å‡½å¼åº«çš„æª”æ¡ˆçµæ§‹

## JavaScript Class å°è£æ¨¡å¼

```javascript
// ä½¿ç”¨ IIFE åŒ…è£é¿å…å…¨åŸŸæ±¡æŸ“
(function (global) {
    'use strict';

    /**
     * åŸºç¤æœå‹™é¡åˆ¥ - å±•ç¤ºå®Œæ•´çš„ getter/setter chainable æ¨¡å¼
     */
    class DeusBaseService {
        constructor() {
            // å…§éƒ¨è¨­å®šç‰©ä»¶
            this._config = {
                apiUrl: null,
                timeout: 5000,
                retries: 3,
                debug: false,  // é—œéµéœ€æ±‚ï¼šdebug åƒæ•¸
                headers: {},
                credentials: null
            };

            this.logger = global.DeusLogger ? new global.DeusLogger(this._config.debug) : console;
            this.initialize();
        }

        initialize() {
            this.logger.info('ğŸš€ æœå‹™åˆå§‹åŒ–é–‹å§‹');
        }

        // =================
        // Getter æ–¹æ³•
        // =================

        getApiUrl() {
            return this._config.apiUrl;
        }

        getTimeout() {
            return this._config.timeout;
        }

        getRetries() {
            return this._config.retries;
        }

        getDebug() {
            return this._config.debug;
        }

        getHeaders() {
            return Object.assign({}, this._config.headers); // å›å‚³å‰¯æœ¬é¿å…å¤–éƒ¨ä¿®æ”¹
        }

        getCredentials() {
            return this._config.credentials;
        }

        getConfig() {
            return Object.assign({}, this._config); // å›å‚³å®Œæ•´è¨­å®šçš„å‰¯æœ¬
        }

        // =================
        // Setter æ–¹æ³• - å…¨éƒ¨æ”¯æ´éˆå¼å‘¼å«
        // =================

        setApiUrl(url) {
            if (typeof url !== 'string' || !url.trim()) {
                throw new Error('API URL å¿…é ˆæ˜¯éç©ºå­—ä¸²');
            }
            this._config.apiUrl = url.trim();
            return this; // æ”¯æ´éˆå¼å‘¼å«
        }

        setTimeout(timeout) {
            if (typeof timeout !== 'number' || timeout <= 0) {
                throw new Error('Timeout å¿…é ˆæ˜¯æ­£æ•´æ•¸');
            }
            this._config.timeout = timeout;
            return this;
        }

        setRetries(retries) {
            if (typeof retries !== 'number' || retries < 0) {
                throw new Error('Retries å¿…é ˆæ˜¯éè² æ•´æ•¸');
            }
            this._config.retries = retries;
            return this;
        }

        setDebug(debug) {
            this._config.debug = Boolean(debug);
            // æ›´æ–° logger çš„ debug æ¨¡å¼
            if (this.logger && typeof this.logger.setDebugMode === 'function') {
                this.logger.setDebugMode(this._config.debug);
            }
            return this;
        }

        setHeaders(headers) {
            if (typeof headers !== 'object' || headers === null) {
                throw new Error('Headers å¿…é ˆæ˜¯ç‰©ä»¶');
            }
            this._config.headers = Object.assign({}, headers);
            return this;
        }

        addHeader(key, value) {
            if (typeof key !== 'string' || !key.trim()) {
                throw new Error('Header key å¿…é ˆæ˜¯éç©ºå­—ä¸²');
            }
            this._config.headers[key] = value;
            return this;
        }

        setCredentials(credentials) {
            this._config.credentials = credentials;
            return this;
        }

        // æ‰¹æ¬¡è¨­å®šæ–¹æ³•
        setConfig(configObject) {
            if (typeof configObject !== 'object' || configObject === null) {
                throw new Error('Config å¿…é ˆæ˜¯ç‰©ä»¶');
            }

            // é€ä¸€è¨­å®šï¼Œç¢ºä¿é©—è­‰é‚è¼¯ç”Ÿæ•ˆ
            Object.keys(configObject).forEach(function (key) {
                const setterName = 'set' + key.charAt(0).toUpperCase() + key.slice(1);
                if (typeof this[setterName] === 'function') {
                    this[setterName](configObject[key]);
                }
            }.bind(this));

            return this;
        }

        // =================
        // åŠŸèƒ½æ–¹æ³• - ä¹Ÿæ”¯æ´éˆå¼å‘¼å«
        // =================

        validate() {
            this.logger.info('ğŸ“‹ é–‹å§‹é©—è­‰è¨­å®š');

            if (!this.getApiUrl()) {
                throw new Error('API URL æ˜¯å¿…è¦åƒæ•¸');
            }

            if (this.getTimeout() <= 0) {
                throw new Error('Timeout å¿…é ˆå¤§æ–¼ 0');
            }

            this.logger.success('âœ… è¨­å®šé©—è­‰é€šé');
            return this;
        }

        execute() {
            this.logger.info('ğŸ“Š é–‹å§‹åŸ·è¡Œæœå‹™');

            try {
                // åŸ·è¡Œé‚è¼¯
                const config = this.getConfig();
                this.logger.debug('ğŸ” ä½¿ç”¨è¨­å®š: ' + JSON.stringify(config));

                // æ¨¡æ“¬åŸ·è¡Œéç¨‹
                this.logger.info('â³ æ­£åœ¨è™•ç†è«‹æ±‚...');

                this.logger.success('âœ… æœå‹™åŸ·è¡ŒæˆåŠŸ');
                return this;
            } catch (error) {
                this.logger.error('âŒ æœå‹™åŸ·è¡Œå¤±æ•—: ' + error.message);
                throw error;
            }
        }

        reset() {
            this._config = {
                apiUrl: null,
                timeout: 5000,
                retries: 3,
                debug: false,
                headers: {},
                credentials: null
            };
            this.logger.info('ğŸ”„ è¨­å®šå·²é‡ç½®');
            return this;
        }
    }

    // å°‡é¡åˆ¥æ›è¼‰åˆ°å…¨åŸŸç‰©ä»¶
    global.DeusBaseService = DeusBaseService;

})(window);

// =================
// ä½¿ç”¨ç¯„ä¾‹ - å±•ç¤º chainable API
// =================

/*
// åŸºæœ¬éˆå¼å‘¼å« - æ³¨æ„ debug åƒæ•¸çš„ä½¿ç”¨
const service = new DeusBaseService()
    .setApiUrl('https://api.example.com')
    .setTimeout(3000)
    .setRetries(5)
    .setDebug(true)                 // å•Ÿç”¨é™¤éŒ¯æ¨¡å¼
    .addHeader('Authorization', 'Bearer token123')
    .addHeader('Content-Type', 'application/json')
    .validate()
    .execute();

// æ­£å¼ç’°å¢ƒä½¿ç”¨ - é—œé–‰é™¤éŒ¯æ¨¡å¼
const service2 = new DeusBaseService()
    .setConfig({
        apiUrl: 'https://api.example.com',
        timeout: 8000,
        retries: 2,
        debug: false                // é—œé–‰é™¤éŒ¯æ¨¡å¼ï¼Œä¸è¼¸å‡º debug è¨Šæ¯
    })
    .addHeader('User-Agent', 'MyApp/1.0')
    .validate()
    .execute();

// å‹•æ…‹èª¿æ•´è¨­å®š - åŒ…å« debug åˆ‡æ›
service
    .setTimeout(10000)              // èª¿æ•´ timeout
    .setRetries(1)                  // èª¿æ•´é‡è©¦æ¬¡æ•¸
    .setDebug(false)                // é—œé–‰é™¤éŒ¯æ¨¡å¼
    .execute();                     // é‡æ–°åŸ·è¡Œ

// é–‹ç™¼éšæ®µé™¤éŒ¯
service
    .setDebug(true)                 // é–‹å•Ÿé™¤éŒ¯æ¨¡å¼
    .debug('é€™æ˜¯é™¤éŒ¯è¨Šæ¯')           // åªåœ¨ debug=true æ™‚é¡¯ç¤º
    .execute();

// å–å¾—è¨­å®šå€¼ - åŒ…å« debug ç‹€æ…‹
console.log('ç•¶å‰ API URL:', service.getApiUrl());
console.log('ç•¶å‰ debug æ¨¡å¼:', service.getDebug());  // é—œéµæ–¹æ³•
console.log('ç•¶å‰å®Œæ•´è¨­å®š:', service.getConfig());

// é‡ç½®ä¸¦é‡æ–°è¨­å®š
service
    .reset()                        // é‡ç½®æ‰€æœ‰è¨­å®šï¼ˆdebug å›åˆ°é è¨­ falseï¼‰
    .setApiUrl('https://new-api.example.com')
    .setDebug(true)                 // é‡æ–°å•Ÿç”¨é™¤éŒ¯
    .setTimeout(5000)
    .validate()
    .execute();
*/
```

## Getter/Setter è¨­è¨ˆåŸå‰‡

### âœ… **å¿…é ˆéµå¾ªçš„è¦å‰‡**

1. **æ‰€æœ‰åƒæ•¸éƒ½è¦æœ‰å°æ‡‰çš„ getter å’Œ setter**
2. **Setter æ–¹æ³•å¿…é ˆå›å‚³ `this`** ä»¥æ”¯æ´éˆå¼å‘¼å«
3. **Getter æ–¹æ³•å¿…é ˆå›å‚³å€¼çš„å‰¯æœ¬**ï¼ˆé¿å…å¤–éƒ¨ä¿®æ”¹å…§éƒ¨ç‹€æ…‹ï¼‰
4. **åƒæ•¸é©—è­‰åœ¨ setter ä¸­é€²è¡Œ**
5. **æä¾›æ‰¹æ¬¡è¨­å®šæ–¹æ³•** `.setConfig(object)`
6. **æä¾›é‡ç½®æ–¹æ³•** `.reset()`

### ğŸ“ **å‘½åè¦ç¯„**

```javascript
// Getter: get + åƒæ•¸åç¨±ï¼ˆé¦–å­—æ¯å¤§å¯«ï¼‰
getApiUrl(), getTimeout(), getDebug()

// Setter: set + åƒæ•¸åç¨±ï¼ˆé¦–å­—æ¯å¤§å¯«ï¼‰  
setApiUrl(url), setTimeout(timeout), setDebug(debug)
```

### ğŸ”— **éˆå¼å‘¼å«ç¯„ä¾‹**

```javascript
const result = new ClassName()
    .setApiUrl('https://api.com')
    .setTimeout(5000)
    .setDebug(true)
    .validate()
    .execute();
```

## ç€è¦½å™¨ç›¸å®¹æ€§æª¢æŸ¥

```javascript
// ç€è¦½å™¨ç›¸å®¹æ€§æª¢æŸ¥å·¥å…·
(function (global) {
    'use strict';

    class DeusCompatibilityChecker {
        static check() {
            const checks = [
                this.checkES6Support(),
                this.checkLocalStorageSupport(),
                this.checkJSONSupport(),
                this.checkFetchSupport(),
                this.checkPromiseSupport()
            ];

            return checks.every(function (check) {
                return check;
            });
        }

        static checkES6Support() {
            return !!(Array.prototype.includes &&
                Object.assign &&
                Promise);
        }

        static checkLocalStorageSupport() {
            try {
                return 'localStorage' in global && global.localStorage !== null;
            } catch (e) {
                return false;
            }
        }

        static checkJSONSupport() {
            return !!(global.JSON && global.JSON.parse && global.JSON.stringify);
        }

        static checkFetchSupport() {
            return !!(global.fetch);
        }

        static checkPromiseSupport() {
            return !!(global.Promise);
        }
    }

    global.DeusCompatibilityChecker = DeusCompatibilityChecker;

})(window);
```

## éŒ¯èª¤è™•ç†å’Œé™¤éŒ¯

```javascript
// å…¨åŸŸéŒ¯èª¤è™•ç†
(function (global) {
    'use strict';

    class DeusErrorHandler {
        constructor() {
            this.setupGlobalErrorHandling();
        }

        setupGlobalErrorHandling() {
            // æ•ç² JavaScript éŒ¯èª¤
            global.addEventListener('error', function (event) {
                console.error('âŒ JavaScript Error:', {
                    message: event.message,
                    filename: event.filename,
                    lineno: event.lineno,
                    colno: event.colno,
                    error: event.error
                });
            });

            // æ•ç² Promise æ‹’çµ•
            global.addEventListener('unhandledrejection', function (event) {
                console.error('âŒ Unhandled Promise Rejection:', event.reason);
            });
        }

        static handleError(error, context) {
            const errorInfo = {
                message: error.message || 'Unknown error',
                stack: error.stack || 'No stack trace',
                context: context || 'Unknown context',
                timestamp: new Date().toISOString()
            };

            console.error('âŒ Error Handler:', errorInfo);

            // å¯ä»¥åœ¨é€™è£¡åŠ å…¥éŒ¯èª¤å›å ±é‚è¼¯
            return errorInfo;
        }
    }

    global.DeusErrorHandler = DeusErrorHandler;

    // è‡ªå‹•åˆå§‹åŒ–éŒ¯èª¤è™•ç†
    new DeusErrorHandler();

})(window);
```

## æ•ˆèƒ½æœ€ä½³åŒ–

- **ä½¿ç”¨ debounce å’Œ throttle** æ§åˆ¶é »ç¹äº‹ä»¶
- **æ‡¶è¼‰å…¥éå¿…è¦åŠŸèƒ½**
- **ä½¿ç”¨ DocumentFragment** é€²è¡Œæ‰¹æ¬¡ DOM æ“ä½œ
- **é¿å…å¼·åˆ¶é‡æ’é‡ç¹ª**
- **ä½¿ç”¨ Web Workers** è™•ç†è€—æ™‚æ“ä½œï¼ˆå¯é¸ï¼‰

```javascript
// æ•ˆèƒ½å·¥å…·é¡åˆ¥
(function (global) {
    'use strict';

    class DeusPerformanceUtils {
        // Debounce å‡½æ•¸
        static debounce(func, wait) {
            let timeout;
            return function executedFunction() {
                const later = function () {
                    clearTimeout(timeout);
                    func.apply(this, arguments);
                }.bind(this);
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Throttle å‡½æ•¸
        static throttle(func, limit) {
            let inThrottle;
            return function () {
                const args = arguments;
                const context = this;
                if (!inThrottle) {
                    func.apply(context, args);
                    inThrottle = true;
                    setTimeout(function () {
                        inThrottle = false;
                    }, limit);
                }
            };
        }

        // æ•ˆèƒ½ç›£æ§
        static measurePerformance(name, func) {
            const startTime = performance.now();
            const result = func();
            const endTime = performance.now();
            console.log('â±ï¸ ' + name + ' åŸ·è¡Œæ™‚é–“: ' + (endTime - startTime) + ' æ¯«ç§’');
            return result;
        }
    }

    global.DeusPerformanceUtils = DeusPerformanceUtils;

})(window);
```

## é‡è¦é–‹ç™¼åŸå‰‡

- **ç¢ºä¿ä½ ç”¨é©ç•¶çš„ JavaScript é¡åˆ¥å’Œ IIFE å°è£ä¾†éš”é›¢ç¨‹å¼ç¢¼**ï¼Œé¿å…èˆ‡å…¨åŸŸç¯„åœè¡çª
- **ç‰¹åˆ¥é‡è¦ï¼šæ¯ä¸€æ¬¡çš„ç¨‹å¼ä¿®æ”¹éƒ½è¦ 100% é¿å… breaking changes**ï¼Œçµ•å°ä¸èƒ½ç ´å£ç¾æœ‰åŠŸèƒ½
- **ç¢ºä¿ä½ å¯«çš„ä»»ä½•ç¨‹å¼ç¢¼éƒ½æ˜¯æ­£å¼ç’°å¢ƒå¯ç”¨çš„**ï¼Œä¸¦ä¸”å¯ä»¥ç›´æ¥åœ¨ç€è¦½å™¨ä¸­é‹ä½œ
- **æ‰€æœ‰åŠŸèƒ½éƒ½è¦æœ‰é©ç•¶çš„éŒ¯èª¤è™•ç†**
- **ç¢ºä¿åœ¨æ²’æœ‰ console ç‰©ä»¶çš„ç’°å¢ƒä¸­ä¹Ÿèƒ½æ­£å¸¸é‹ä½œ**
- **ä½¿ç”¨æ¼¸é€²å¼å¢å¼·çš„æ–¹å¼é–‹ç™¼åŠŸèƒ½**
- **çµ•å°ç¦æ­¢ä½¿ç”¨ä»»ä½•éœ€è¦å»ºç½®ã€ç·¨è­¯ã€è½‰è­¯çš„èªæ³•æˆ–å·¥å…·**
- **æ¯å€‹ JavaScript æª”æ¡ˆéƒ½å¿…é ˆæ˜¯å¯ä»¥ç›´æ¥åŸ·è¡Œçš„æœ€çµ‚ç‰ˆæœ¬**
- **å¼·åˆ¶è¦æ±‚ï¼šæ‰€æœ‰é¡åˆ¥çš„åƒæ•¸å’Œè¨­å®šéƒ½å¿…é ˆä½¿ç”¨ getter/setter æ¨¡å¼**
- **å¼·åˆ¶è¦æ±‚ï¼šæ‰€æœ‰ setter æ–¹æ³•éƒ½å¿…é ˆå›å‚³ this ä»¥æ”¯æ´éˆå¼å‘¼å«**
- **å¼·åˆ¶è¦æ±‚ï¼šæ‰€æœ‰ getter æ–¹æ³•éƒ½å¿…é ˆå›å‚³å€¼çš„å®‰å…¨å‰¯æœ¬**
- **å¼·åˆ¶è¦æ±‚ï¼šæä¾›æ‰¹æ¬¡è¨­å®šæ–¹æ³•å’Œé‡ç½®åŠŸèƒ½**
- **é—œéµéœ€æ±‚ï¼šæ‰€æœ‰å‡½å¼åº«éƒ½å¿…é ˆåŒ…å« debug åƒæ•¸æ§åˆ¶é™¤éŒ¯è¨Šæ¯é¡¯ç¤º**
- **é—œéµéœ€æ±‚ï¼šdebug=false æ™‚çµ•å°ä¸èƒ½åœ¨ console è¼¸å‡ºé™¤éŒ¯è¨Šæ¯**

## Getter/Setter å¯¦ä½œæª¢æŸ¥æ¸…å–®

åœ¨å¯¦ä½œä»»ä½•é¡åˆ¥æ™‚ï¼Œè«‹ç¢ºèªä»¥ä¸‹é …ç›®ï¼š

### âœ… **å¿…è¦æª¢æŸ¥é …ç›®**

- [ ] æ¯å€‹è¨­å®šåƒæ•¸éƒ½æœ‰å°æ‡‰çš„ getter å’Œ setter æ–¹æ³•
- [ ] æ‰€æœ‰ setter æ–¹æ³•éƒ½å›å‚³ `this`
- [ ] æ‰€æœ‰ getter æ–¹æ³•éƒ½å›å‚³å€¼çš„å‰¯æœ¬ï¼ˆé¿å…å¤–éƒ¨ä¿®æ”¹ï¼‰
- [ ] setter æ–¹æ³•åŒ…å«é©ç•¶çš„åƒæ•¸é©—è­‰
- [ ] æä¾› `setConfig(object)` æ‰¹æ¬¡è¨­å®šæ–¹æ³•
- [ ] æä¾› `getConfig()` å–å¾—å®Œæ•´è¨­å®šæ–¹æ³•
- [ ] æä¾› `reset()` é‡ç½®è¨­å®šæ–¹æ³•
- [ ] **å¿…é ˆåŒ…å« `setDebug(boolean)` å’Œ `getDebug()` æ–¹æ³•**
- [ ] **debug åƒæ•¸å¿…é ˆæ§åˆ¶ console é™¤éŒ¯è¨Šæ¯çš„é¡¯ç¤º/éš±è—**
- [ ] **å¿…é ˆä½¿ç”¨ Shadow DOM å°è£æ‰€æœ‰ CSS å’Œ JavaScript**
- [ ] **å»ºç«‹ Closed Shadow DOMï¼ˆmode: 'closed'ï¼‰**
- [ ] **æ‰€æœ‰æ¨£å¼éƒ½åœ¨ Shadow DOM å…§å®šç¾©**
- [ ] **çµ•å°ä¸å°‡ CSS æ³¨å…¥åˆ°ä¸»é é¢**
- [ ] **äº‹ä»¶è™•ç†å™¨åœ¨ Shadow DOM å…§è¨»å†Š**
- [ ] **æä¾› destroy() æ–¹æ³•æ¸…ç† Shadow DOM è³‡æº**

### ğŸ“‹ **é©—è­‰ç¯„ä¾‹**

```javascript
// é©—è­‰åŸºæœ¬åŠŸèƒ½
const hostElement = document.createElement('div');
document.body.appendChild(hostElement);

// è¨˜éŒ„ä¸»é é¢ CSS æ•¸é‡ï¼ˆé©—è­‰ç„¡ CSS æ³¨å…¥ï¼‰
const initialStyleCount = document.head.querySelectorAll('style').length;
const initialStyleSheetCount = document.styleSheets.length;

const instance = new YourClass(hostElement)
    .setApiUrl('https://api.com')
    .setDebug(true)
    .setTheme('dark')
    .validate();

// é©—è­‰ Shadow DOM éš”é›¢
console.log('Shadow Root å­˜åœ¨:', !!instance.shadowRoot);
console.log('Debug æ¨¡å¼:', instance.getDebug());

// ğŸ” é—œéµé©—è­‰ï¼šç¢ºèªæ²’æœ‰ CSS æ³¨å…¥åˆ°ä¸»é é¢
const finalStyleCount = document.head.querySelectorAll('style').length;
const finalStyleSheetCount = document.styleSheets.length;

if (finalStyleCount === initialStyleCount && finalStyleSheetCount === initialStyleSheetCount) {
    console.log('âœ… é©—è­‰é€šéï¼šæ²’æœ‰ CSS æ³¨å…¥åˆ°ä¸»é é¢');
} else {
    console.error('âŒ é©—è­‰å¤±æ•—ï¼šæª¢æ¸¬åˆ° CSS è¢«æ³¨å…¥åˆ°ä¸»é é¢');
}

// é©—è­‰æ¨£å¼éš”é›¢ - å¤–éƒ¨æ¨£å¼ä¸æœƒå½±éŸ¿çµ„ä»¶
document.head.insertAdjacentHTML('beforeend', '<style>div { background: red !important; }</style>');
// Shadow DOM å…§çš„æ¨£å¼æ‡‰è©²ä¸å—å½±éŸ¿

// æ¸…ç†è³‡æº
instance.destroy();
```

## Plan & Review

### Before starting work

- **Always enter plan mode to make a comprehensive plan**
- **After creating the plan, write it to `{{current_dir}}/tasks/TASK_NAME.md`**
- **The plan should include:**
    - Detailed implementation strategy with reasoning
    - Tasks broken down into manageable steps
    - **JavaScript Class design with getter/setter + chainable API structure**
    - **Shadow DOM encapsulation strategy for complete CSS/JS isolation**
    - **Debug parameter implementation strategy**
    - **Breaking Changes impact assessment**
    - **Zero-build compatibility check**
- **If the task requires external knowledge, research using Task tool**
- **Always think MVP** - focus on essential functionality first
- **Once the plan is written, ask for user review and approval before proceeding**

### While implementing

- **Continuously update the plan as work progresses**
- **Before making any code changes, verify no Breaking Changes will occur**
- **After completing each task, update with:**
    - Detailed descriptions of changes made
    - **Confirmation that getter/setter + chainable pattern is maintained**
    - **Verification that Shadow DOM encapsulation is properly implemented**
    - **Confirmation that CSS and JS are fully isolated within Shadow DOM**
    - **Verification that no CSS was injected into the main page**
    - **Verification that debug parameter works correctly**
    - **Zero-build principle compliance check**
- **Document changes thoroughly for easy handover to other engineers**

## æ–‡ä»¶æ’°å¯«è¦ç¯„

- **ä½¿ç”¨ JSDoc æ ¼å¼è¨»è§£**è¨˜éŒ„å‡½æ•¸åŠŸèƒ½ã€åƒæ•¸å’Œå›å‚³å€¼
- **æ¯å€‹é¡åˆ¥éƒ½è¦æœ‰è©³ç´°çš„ä½¿ç”¨èªªæ˜**
- **æä¾›å®Œæ•´çš„ç¯„ä¾‹ç¨‹å¼ç¢¼**
- **ç‰¹åˆ¥èªªæ˜ getter/setter æ–¹æ³•çš„ç”¨é€”å’Œéˆå¼å‘¼å«æ¨¡å¼**

```javascript
/**
 * Shadow DOM å°è£çµ„ä»¶
 * @class DeusMainClass
 * @description å±•ç¤º Shadow DOM + getter/setter + chainable API è¨­è¨ˆæ¨¡å¼
 * @compatibility æ”¯æ´ 2022 å¹´ä»¥ä¾†çš„ç€è¦½å™¨ç‰ˆæœ¬
 *
 * @example
 * // åŸºæœ¬ä½¿ç”¨æ–¹å¼ - Shadow DOM å®Œå…¨éš”é›¢
 * const hostElement = document.createElement('div');
 * document.body.appendChild(hostElement);
 *
 * const instance = new DeusMainClass(hostElement)
 *     .setTheme('dark')
 *     .setDebug(true)             // é—œéµéœ€æ±‚ï¼šå•Ÿç”¨é™¤éŒ¯æ¨¡å¼
 *     .setContent('éš”é›¢çš„å…§å®¹')
 *     .validate();
 *
 * // å–å¾—è¨­å®šå€¼ï¼ˆåŒ…å« debug ç‹€æ…‹ï¼‰
 * console.log('Theme:', instance.getTheme());
 * console.log('Debug æ¨¡å¼:', instance.getDebug()); // é—œéµæ–¹æ³•
 *
 * // Shadow DOM å®Œå…¨éš”é›¢ï¼Œå¤–éƒ¨æ¨£å¼ä¸æœƒå½±éŸ¿çµ„ä»¶
 * document.head.insertAdjacentHTML('beforeend',
 *     '<style>div { background: red !important; }</style>');
 * // çµ„ä»¶å…§éƒ¨æ¨£å¼ä¸å—å½±éŸ¿
 */
class DeusMainClass {
    /**
     * å»ºæ§‹å‡½æ•¸ - å»ºç«‹ Shadow DOM
     * @constructor
     * @param {HTMLElement} hostElement - Shadow DOM çš„å®¿ä¸»å…ƒç´ 
     * @description å»ºç«‹ Closed Shadow DOM ä¸¦åˆå§‹åŒ–çµ„ä»¶
     */
    constructor(hostElement) {
        // Shadow DOM åˆå§‹åŒ–...
    }

    /**
     * è¨­å®šä¸»é¡Œï¼ˆShadow DOM æ¨£å¼éš”é›¢ï¼‰
     * @method setTheme
     * @param {string} theme - ä¸»é¡Œåç¨± ('light', 'dark')
     * @returns {DeusMainClass} å›å‚³è‡ªèº«å¯¦ä¾‹ä»¥æ”¯æ´éˆå¼å‘¼å«
     * @example
     * instance.setTheme('dark').setDebug(true);
     */
    setTheme(theme) {
        // æ–¹æ³•å¯¦ä½œ...
    }

    /**
     * è¨­å®šé™¤éŒ¯æ¨¡å¼ï¼ˆé—œéµéœ€æ±‚ï¼‰
     * @method setDebug
     * @param {boolean} debug - æ˜¯å¦å•Ÿç”¨é™¤éŒ¯æ¨¡å¼
     * @returns {DeusMainClass} å›å‚³è‡ªèº«å¯¦ä¾‹ä»¥æ”¯æ´éˆå¼å‘¼å«
     * @description æ§åˆ¶ Shadow DOM å…§çš„é™¤éŒ¯è³‡è¨Šé¡¯ç¤º
     */
    setDebug(debug) {
        // æ–¹æ³•å¯¦ä½œ...
    }

    /**
     * éŠ·æ¯€ Shadow DOM çµ„ä»¶
     * @method destroy
     * @description æ¸…ç† Shadow DOM å…§çš„æ‰€æœ‰å…§å®¹å’Œäº‹ä»¶ç›£è½å™¨
     * @example
     * instance.destroy(); // å®Œå…¨æ¸…ç†çµ„ä»¶
     */
    destroy() {
        // æ–¹æ³•å¯¦ä½œ...
    }
}
```
